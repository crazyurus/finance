var DWZ={regPlugins:[],keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(c,a,b){return(c>a)&&(c<(a+b))},isOver:function(f,e,c,b,a,d){return this.isOverAxis(f,c,a)&&this.isOverAxis(e,b,d)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},keys:{statusCode:"statusCode",message:"message"},ui:{sbar:true,hideMode:"display"},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:false},msg:function(c,b){var a=function(g,d){d=d||[];var f=g||"";for(var e=0;e<d.length;e++){f=f.replace(new RegExp("\\{"+e+"\\}","g"),d[e])}return f};return a(this._msg[c],b)},debug:function(a){if(this._set.debug){if(typeof(console)!="undefined"){console.log(a)}else{alert(a)}}},loadLogin:function(){if($.pdialog&&DWZ._set.loginTitle){$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:true,width:520,height:260})}else{window.location=DWZ._set.loginUrl}},obj2str:function(b){var c=[];if(typeof b=="string"){return'"'+b.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof b=="object"){if(!b.sort){for(var a in b){c.push(a+":"+DWZ.obj2str(b[a]))}if(!!document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(b.toString)){c.push("toString:"+b.toString.toString())}c="{"+c.join()+"}"}else{for(var a=0;a<b.length;a++){c.push(DWZ.obj2str(b[a]))}c="["+c.join()+"]"}return c}return b.toString()},jsonEval:function(data){try{if($.type(data)=="string"){return eval("("+data+")")}else{return data}}catch(e){return{}}},ajaxError:function(c,a,b){if(alertMsg){alertMsg.error("<div>Http status: "+c.status+" "+c.statusText+"</div><div>ajaxOptions: "+a+"</div><div>thrownError: "+b+"</div><div>"+c.responseText+"</div>")}else{alert("Http status: "+c.status+" "+c.statusText+"\najaxOptions: "+a+"\nthrownError:"+b+"\n"+c.responseText)}},ajaxDone:function(a){if(a[DWZ.keys.statusCode]==DWZ.statusCode.error){if(a[DWZ.keys.message]&&alertMsg){alertMsg.error(a[DWZ.keys.message])}}else{if(a[DWZ.keys.statusCode]==DWZ.statusCode.timeout){if(alertMsg){alertMsg.error(a[DWZ.keys.message]||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin})}else{DWZ.loadLogin()}}else{if(a[DWZ.keys.statusCode]==DWZ.statusCode.ok){if(a[DWZ.keys.message]&&alertMsg){alertMsg.correct(a[DWZ.keys.message])}}}}},init:function(d,c){var b=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:false,statusCode:{},keys:{}},c);this._set.loginUrl=b.loginUrl;this._set.loginTitle=b.loginTitle;this._set.debug=b.debug;$.extend(DWZ.statusCode,b.statusCode);$.extend(DWZ.keys,b.keys);$.extend(DWZ.pageInfo,b.pageInfo);$.extend(DWZ.ui,b.ui);jQuery.ajax({type:"GET",url:d,dataType:"xml",timeout:50000,cache:false,error:function(e){alert("Error loading XML document: "+d+"\nHttp status: "+e.status+" "+e.statusText)},success:function(e){$(e).find("_PAGE_").each(function(){var f=$(this).attr("id");if(f){DWZ.frag[f]=$(this).text()}});$(e).find("_MSG_").each(function(){var f=$(this).attr("id");if(f){DWZ._msg[f]=$(this).text()}});if(jQuery.isFunction(b.callback)){b.callback()}}});var a=$(document);if(!a.isBind(DWZ.eventType.pageClear)){a.bind(DWZ.eventType.pageClear,function(f){var e=f.target;if($.fn.xheditor){$("textarea.editor",e).xheditor(false)}})}}};(function(a){a.setRegional=function(b,c){if(!a.regional){a.regional={}}a.regional[b]=c};a.fn.extend({ajaxUrl:function(c){var b=a(this);b.trigger(DWZ.eventType.pageClear);a.ajax({type:c.type||"GET",url:c.url,data:c.data,cache:false,success:function(e){var d=DWZ.jsonEval(e);if(d[DWZ.keys.statusCode]==DWZ.statusCode.error){if(d[DWZ.keys.message]){alertMsg.error(d[DWZ.keys.message])}}else{b.html(e).initUI();if(a.isFunction(c.callback)){c.callback(e)}}if(d[DWZ.keys.statusCode]==DWZ.statusCode.timeout){if(a.pdialog){a.pdialog.checkTimeout()}if(navTab){navTab.checkTimeout()}alertMsg.error(d[DWZ.keys.message]||DWZ.msg("sessionTimout"),{okCall:function(){DWZ.loadLogin()}})}},error:DWZ.ajaxError,statusCode:{503:function(f,d,e){alert(DWZ.msg("statusCode_503")||e)}}})},loadUrl:function(d,c,b){a(this).ajaxUrl({url:d,data:c,callback:b})},initUI:function(){return this.each(function(){if(a.isFunction(initUI)){initUI(this)}})},layoutH:function(b){return this.each(function(){var c=a(this);if(!b){b=c.parents("div.layoutBox:first")}var f=b.height();var e=parseInt(c.attr("layoutH"));var d=f-e>50?f-e:50;if(c.isTag("table")){c.removeAttr("layoutH").wrap('<div layoutH="'+e+'" style="overflow:auto;height:'+d+'px"></div>')}else{c.height(d).css("overflow","auto")}})},hoverClass:function(c,d){var b=c||"hover";return this.each(function(){var e=a(this),f;e.hover(function(){if(f){clearTimeout(f)}e.addClass(b)},function(){f=setTimeout(function(){e.removeClass(b)},d||10)})})},focusClass:function(c){var b=c||"textInputFocus";return this.each(function(){a(this).focus(function(){a(this).addClass(b)}).blur(function(){a(this).removeClass(b)})})},inputAlert:function(){return this.each(function(){var c=a(this);function e(){return c.parent().find("label.alt")}function d(f){var g=c.position();return{width:c.width(),top:g.top+"px",left:g.left+"px",opacity:f||1}}if(e().size()<1){if(!c.attr("id")){c.attr("id",c.attr("name")+"_"+Math.round(Math.random()*10000))}var b=a('<label class="alt" for="'+c.attr("id")+'">'+c.attr("alt")+"</label>").appendTo(c.parent());b.css(d(1));if(c.val()){b.hide()}}c.focus(function(){e().css(d(0.3))}).blur(function(){if(!a(this).val()){e().show().css("opacity",1)}}).keydown(function(){e().hide()})})},isTag:function(b){if(!b){return false}return a(this)[0].tagName.toLowerCase()==b?true:false},isBind:function(c){var b=a(this).data("events");return b&&c&&b[c]},log:function(b){return this.each(function(){if(console){console.log("%s: %o",b,this)}})}});a.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(c,b){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(b){return this.indexOf(b)===0},endsWith:function(c){var b=this.length-c.length;return b>=0&&this.lastIndexOf(c)===b},replaceSuffix:function(b){return this.replace(/\[[0-9]+\]/,"["+b+"]").replace("#index#",b)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return(this).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(c,b){return this.replace(new RegExp(c,"gm"),b)},replaceTm:function(b){if(!b){return this}return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(c){return b[c.replace(/[{}]+/g,"")]})},replaceTmById:function(c){var b=c||a(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(d){var e=b.find("#"+d.replace(/[{}]+/g,""));return e.val()?e.val():d})},isFinishedTm:function(){return !(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this))},skipChar:function(b){if(!this||this.length===0){return""}if(this.charAt(0)===b){return this.substring(1).skipChar(b)}return this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var c=0;c<this.length;c+=1){var b=this.charAt(c);if(b!=" "&&b!="\n"&&b!="\t"&&b!="\r"){return false}}return true},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1}})})(jQuery);function Map(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(a,b){this.remove(a);this.elements.push({key:a,value:b})};this.remove=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){this.elements.splice(i,1);return true}}}catch(b){return false}return false};this.get=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return this.elements[i].value}}}catch(b){return null}};this.element=function(a){if(a<0||a>=this.elements.length){return null}return this.elements[a]};this.containsKey=function(a){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==a){return true}}}catch(b){return false}return false};this.values=function(){var a=new Array();for(i=0;i<this.elements.length;i++){a.push(this.elements[i].value)}return a};this.keys=function(){var a=new Array();for(i=0;i<this.elements.length;i++){a.push(this.elements[i].key)}return a}}(function(){var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function LZ(x){return(x<0||x>9?"":"0")+x}function formatDate(date,format){format=format+"";var result="";var i_format=0;var c="";var token="";var y=date.getYear()+"";var M=date.getMonth()+1;var d=date.getDate();var E=date.getDay();var H=date.getHours();var m=date.getMinutes();var s=date.getSeconds();var yyyy,yy,MMM,MM,dd,hh,h,mm,ss,ampm,HH,H,KK,K,kk,k;var value={};if(y.length<4){y=""+(y-0+1900)}value.y=""+y;value.yyyy=y;value.yy=y.substring(2,4);value.M=M;value.MM=LZ(M);value.MMM=MONTH_NAMES[M-1];value.NNN=MONTH_NAMES[M+11];value.d=d;value.dd=LZ(d);value.E=DAY_NAMES[E+7];value.EE=DAY_NAMES[E];value.H=H;value.HH=LZ(H);if(H==0){value.h=12}else{if(H>12){value.h=H-12}else{value.h=H}}value.hh=LZ(value.h);if(H>11){value.K=H-12}else{value.K=H}value.k=H+1;value.KK=LZ(value.K);value.kk=LZ(value.k);if(H>11){value.a="PM"}else{value.a="AM"}value.m=m;value.mm=LZ(m);value.s=s;value.ss=LZ(s);while(i_format<format.length){c=format.charAt(i_format);token="";while((format.charAt(i_format)==c)&&(i_format<format.length)){token+=format.charAt(i_format++)}if(value[token]!=null){result+=value[token]}else{result+=token}}return result}function _isInteger(val){return(new RegExp(/^\d+$/).test(val))}function _getInt(str,i,minlength,maxlength){for(var x=maxlength;x>=minlength;x--){var token=str.substring(i,i+x);if(token.length<minlength){return null}if(_isInteger(token)){return token}}return null}function parseDate(val,format){val=val+"";format=format+"";var i_val=0;var i_format=0;var c="";var token="";var token2="";var x,y;var now=new Date(1900,0,1);var year=now.getYear();var month=now.getMonth()+1;var date=1;var hh=now.getHours();var mm=now.getMinutes();var ss=now.getSeconds();var ampm="";while(i_format<format.length){c=format.charAt(i_format);token="";while((format.charAt(i_format)==c)&&(i_format<format.length)){token+=format.charAt(i_format++)}if(token=="yyyy"||token=="yy"||token=="y"){if(token=="yyyy"){x=4;y=4}if(token=="yy"){x=2;y=2}if(token=="y"){x=2;y=4}year=_getInt(val,i_val,x,y);if(year==null){return 0}i_val+=year.length;if(year.length==2){if(year>70){year=1900+(year-0)}else{year=2000+(year-0)}}}else{if(token=="MMM"||token=="NNN"){month=0;for(var i=0;i<MONTH_NAMES.length;i++){var month_name=MONTH_NAMES[i];if(val.substring(i_val,i_val+month_name.length).toLowerCase()==month_name.toLowerCase()){if(token=="MMM"||(token=="NNN"&&i>11)){month=i+1;if(month>12){month-=12}i_val+=month_name.length;break}}}if((month<1)||(month>12)){return 0}}else{if(token=="EE"||token=="E"){for(var i=0;i<DAY_NAMES.length;i++){var day_name=DAY_NAMES[i];if(val.substring(i_val,i_val+day_name.length).toLowerCase()==day_name.toLowerCase()){i_val+=day_name.length;break}}}else{if(token=="MM"||token=="M"){month=_getInt(val,i_val,token.length,2);if(month==null||(month<1)||(month>12)){return 0}i_val+=month.length}else{if(token=="dd"||token=="d"){date=_getInt(val,i_val,token.length,2);if(date==null||(date<1)||(date>31)){return 0}i_val+=date.length}else{if(token=="hh"||token=="h"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<1)||(hh>12)){return 0}i_val+=hh.length}else{if(token=="HH"||token=="H"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<0)||(hh>23)){return 0}i_val+=hh.length}else{if(token=="KK"||token=="K"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<0)||(hh>11)){return 0}i_val+=hh.length}else{if(token=="kk"||token=="k"){hh=_getInt(val,i_val,token.length,2);if(hh==null||(hh<1)||(hh>24)){return 0}i_val+=hh.length;hh--}else{if(token=="mm"||token=="m"){mm=_getInt(val,i_val,token.length,2);if(mm==null||(mm<0)||(mm>59)){return 0}i_val+=mm.length}else{if(token=="ss"||token=="s"){ss=_getInt(val,i_val,token.length,2);if(ss==null||(ss<0)||(ss>59)){return 0}i_val+=ss.length}else{if(token=="a"){if(val.substring(i_val,i_val+2).toLowerCase()=="am"){ampm="AM"}else{if(val.substring(i_val,i_val+2).toLowerCase()=="pm"){ampm="PM"}else{return 0}}i_val+=2}else{if(val.substring(i_val,i_val+token.length)!=token){return 0}else{i_val+=token.length}}}}}}}}}}}}}}if(i_val!=val.length){return 0}if(month==2){if(((year%4==0)&&(year%100!=0))||(year%400==0)){if(date>29){return 0}}else{if(date>28){return 0}}}if((month==4)||(month==6)||(month==9)||(month==11)){if(date>30){return 0}}if(hh<12&&ampm=="PM"){hh=hh-0+12}else{if(hh>11&&ampm=="AM"){hh-=12}}return new Date(year,month-1,date,hh,mm,ss)}Date.prototype.formatDate=function(dateFmt){return formatDate(this,dateFmt)};String.prototype.parseDate=function(dateFmt){if(this.length<dateFmt.length){dateFmt=dateFmt.slice(0,this.length)}return parseDate(this,dateFmt)};function replaceTmEval(data){return data.replace(RegExp("({[A-Za-z0-9_+-]*})","g"),function($1){return eval("("+$1.replace(/[{}]+/g,"")+")")})}Date.prototype.formatDateTm=function(dateFmt){var y=this.getFullYear();var m=this.getMonth()+1;var d=this.getDate();var sDate=dateFmt.replaceAll("%y",y).replaceAll("%M",m).replaceAll("%d",d);sDate=replaceTmEval(sDate);var _y=1900,_m=0,_d=1;var aDate=sDate.split("-");if(aDate.length>0){_y=aDate[0]}if(aDate.length>1){_m=aDate[1]-1}if(aDate.length>2){_d=aDate[2]}return new Date(_y,_m,_d).formatDate("yyyy-MM-dd")}})();(function($){if($.validator){$.validator.addMethod("alphanumeric",function(value,element){return this.optional(element)||/^\w+$/i.test(value)},"Letters, numbers or underscores only please");$.validator.addMethod("lettersonly",function(value,element){return this.optional(element)||/^[a-z]+$/i.test(value)},"Letters only please");$.validator.addMethod("phone",function(value,element){return this.optional(element)||/^[0-9 \(\)]{7,30}$/.test(value)},"Please specify a valid phone number");$.validator.addMethod("postcode",function(value,element){return this.optional(element)||/^[0-9 A-Za-z]{5,20}$/.test(value)},"Please specify a valid postcode");$.validator.addMethod("date",function(value,element){value=value.replace(/\s+/g,"");if(String.prototype.parseDate){var $input=$(element);var pattern=$input.attr("dateFmt")||"yyyy-MM-dd";return !$input.val()||$input.val().parseDate(pattern)}else{return this.optional(element)||value.match(/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/)}},"Please enter a valid date.");$.validator.addMethod("customvalid",function(value,element,params){try{return eval("("+params+")")}catch(e){return false}},"Please fix this field.");$.validator.addClassRules({date:{date:true},alphanumeric:{alphanumeric:true},lettersonly:{lettersonly:true},phone:{phone:true},postcode:{postcode:true}});$.validator.setDefaults({errorElement:"span"});$.validator.autoCreateRanges=true}})(jQuery);(function(a){a.fn.cssv=function(c){var b=a(this).css(c);return b.substring(0,b.indexOf("px"))*1};a.fn.jBar=function(c){var b=a.extend({container:"#container",collapse:".collapse",toggleBut:".toggleCollapse div",sideBar:"#sidebar",sideBar2:"#sidebar_s",splitBar:"#splitBar",splitBar2:"#splitBarProxy"},c);return this.each(function(){var e=this;var f=a(b.sideBar2,e);var d=a(b.sideBar,e);a(b.toggleBut,d).click(function(){DWZ.ui.sbar=false;a(b.splitBar).hide();var k=f.cssv("left")+f.outerWidth();var g=k-d.outerWidth();var h=a(b.container).cssv("left")-(d.outerWidth()-f.outerWidth());var j=d.outerWidth()-f.outerWidth()+a(b.container).outerWidth();a(b.container).animate({left:h,width:j},50,function(){d.animate({left:g},500,function(){d.hide();f.show().css("left",-50).animate({left:5},200);a(window).trigger(DWZ.eventType.resizeGrid)})});a(b.collapse,f).click(function(){var m=f.cssv("left")+f.outerWidth();if(d.is(":hidden")){a(b.toggleBut,d).hide();d.show().animate({left:m},500);a(b.container).click(l)}else{d.animate({left:g},500,function(){d.hide()})}function l(){a(b.container).unbind("click",l);if(!DWZ.ui.sbar){d.animate({left:g},500,function(){d.hide()})}}return false});return false});a(b.toggleBut,f).click(function(){DWZ.ui.sbar=true;f.animate({left:-25},200,function(){d.show()});d.animate({left:5},800,function(){a(b.splitBar).show();a(b.toggleBut,d).show();var g=5+d.outerWidth()+a(b.splitBar).outerWidth();var h=a(b.container).outerWidth()-(g-a(b.container).cssv("left"));a(b.container).css({left:g,width:h});a(b.collapse,f).unbind("click");a(window).trigger(DWZ.eventType.resizeGrid)});return false});a(b.splitBar).mousedown(function(g){a(b.splitBar2).each(function(){var h=a(this);setTimeout(function(){h.show()},100);h.css({visibility:"visible",left:a(b.splitBar).css("left")});h.jDrag(a.extend(c,{obj:a("#sidebar"),move:"horizontal",event:g,stop:function(){a(this).css("visibility","hidden");var l=a(this).cssv("left")-a(b.splitBar).cssv("left");var m=d.outerWidth()+l;var j=a(b.container).cssv("left")+l;var k=a(b.container).outerWidth()-l;d.css("width",m);a(b.splitBar).css("left",a(this).css("left"));a(b.container).css({left:j,width:k})}}));return false})})})}})(jQuery);(function(a){a.fn.jDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){a(this).unbind("mousedown",a.rwdrag.start);a.data(this,"pp-rwdrag",null)})}}return this.each(function(){var c=a(this);a.data(a.rwdrag,"pp-rwdrag",{options:a.extend({el:c,obj:c},b)});if(b.event){a.rwdrag.start(b.event)}else{var d=b.selector;a(d,obj).bind("mousedown",a.rwdrag.start)}})};a.rwdrag={start:function(c){document.onselectstart=function(f){return false};var b=a.data(this,"pp-rwdrag");var d=b.options.el[0];a.data(d,"pp-rwdrag",{options:b.options});if(!a.rwdrag.current){a.rwdrag.current={el:d,oleft:parseInt(d.style.left)||0,otop:parseInt(d.style.top)||0,ox:c.pageX||c.screenX,oy:c.pageY||c.screenY};a(document).bind("mouseup",a.rwdrag.stop).bind("mousemove",a.rwdrag.drag)}},drag:function(d){if(!d){var d=window.event}var b=a.rwdrag.current;var c=a.data(b.el,"pp-rwdrag");var f=(b.oleft+(d.pageX||d.clientX)-b.ox);var h=(b.otop+(d.pageY||d.clientY)-b.oy);if(h<1){h=0}if(c.options.move=="horizontal"){if((c.options.minW&&f>=a(c.options.obj).cssv("left")+c.options.minW)&&(c.options.maxW&&f<=a(c.options.obj).cssv("left")+c.options.maxW)){b.el.style.left=f+"px"}else{if(c.options.scop){if(c.options.relObj){if((f-parseInt(c.options.relObj.style.left))>c.options.cellMinW){b.el.style.left=f+"px"}}else{b.el.style.left=f+"px"}}}}else{if(c.options.move=="vertical"){b.el.style.top=h+"px"}else{var g=c.options.selector?a(c.options.selector,c.options.obj):a(c.options.obj);if(f>=-g.outerWidth()*2/3&&h>=0&&(f+g.outerWidth()/3<a(window).width())&&(h+g.outerHeight()<a(window).height())){b.el.style.left=f+"px";b.el.style.top=h+"px"}}}if(c.options.drag){c.options.drag.apply(b.el,[b.el,d])}return a.rwdrag.preventEvent(d)},stop:function(d){var b=a.rwdrag.current;var c=a.data(b.el,"pp-rwdrag");a(document).unbind("mousemove",a.rwdrag.drag).unbind("mouseup",a.rwdrag.stop);if(c.options.stop){c.options.stop.apply(b.el,[b.el,d])}a.rwdrag.current=null;document.onselectstart=function(f){return true};return a.rwdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function($){$.extend($.fn,{jTree:function(options){var op=$.extend({checkFn:null,selected:"selected",exp:"expandable",coll:"collapsable",firstExp:"first_expandable",firstColl:"first_collapsable",lastExp:"last_expandable",lastColl:"last_collapsable",folderExp:"folder_expandable",folderColl:"folder_collapsable",endExp:"end_expandable",endColl:"end_collapsable",file:"file",ck:"checked",unck:"unchecked"},options);return this.each(function(){var $this=$(this);var cnum=$this.children().length;$(">li",$this).each(function(){var $li=$(this);var first=$li.prev()[0]?false:true;var last=$li.next()[0]?false:true;$li.genTree({icon:$this.hasClass("treeFolder"),ckbox:$this.hasClass("treeCheck"),options:op,level:0,exp:(cnum>1?(first?op.firstExp:(last?op.lastExp:op.exp)):op.endExp),coll:(cnum>1?(first?op.firstColl:(last?op.lastColl:op.coll)):op.endColl),showSub:(!$this.hasClass("collapse")&&($this.hasClass("expand")||(cnum>1?(first?true:false):true))),isLast:(cnum>1?(last?true:false):true)})});setTimeout(function(){if($this.hasClass("treeCheck")){var checkFn=eval($this.attr("oncheck"));if(checkFn&&$.isFunction(checkFn)){$("div.ckbox",$this).each(function(){var ckbox=$(this);ckbox.click(function(){var checked=$(ckbox).hasClass("checked");var items=[];if(checked){var tnode=$(ckbox).parent().parent();var boxes=$("input",tnode);if(boxes.size()>1){$(boxes).each(function(){items[items.length]={name:$(this).attr("name"),value:$(this).val(),text:$(this).attr("text")}})}else{items={name:boxes.attr("name"),value:boxes.val(),text:boxes.attr("text")}}}checkFn({checked:checked,items:items})})})}}$("a",$this).click(function(event){$("div."+op.selected,$this).removeClass(op.selected);var parent=$(this).parent().addClass(op.selected);var $li=$(this).parents("li:first"),sTarget=$li.attr("target");if(sTarget){if($("#"+sTarget,$this).size()==0){$this.prepend('<input id="'+sTarget+'" type="hidden" />')}$("#"+sTarget,$this).val($li.attr("rel"))}$(".ckbox",parent).trigger("click");event.stopPropagation();$(document).trigger("click");if(!$(this).attr("target")){return false}})},1)})},subTree:function(op,level){return this.each(function(){$(">li",this).each(function(){var $this=$(this);var isLast=($this.next()[0]?false:true);$this.genTree({icon:op.icon,ckbox:op.ckbox,exp:isLast?op.options.lastExp:op.options.exp,coll:isLast?op.options.lastColl:op.options.coll,options:op.options,level:level,space:isLast?null:op.space,showSub:op.showSub,isLast:isLast})})})},genTree:function(options){var op=$.extend({icon:options.icon,ckbox:options.ckbox,exp:"",coll:"",showSub:false,level:0,options:null,isLast:false},options);return this.each(function(){var node=$(this);var tree=$(">ul",node);var parent=node.parent().prev();var checked="unchecked";if(op.ckbox){if($(">.checked",parent).size()>0){checked="checked"}}if(tree.size()>0){node.children(":first").wrap("<div></div>");$(">div",node).prepend("<div class='"+(op.showSub?op.coll:op.exp)+"'></div>"+(op.ckbox?"<div class='ckbox "+checked+"'></div>":"")+(op.icon?"<div class='"+(op.showSub?op.options.folderColl:op.options.folderExp)+"'></div>":""));op.showSub?tree.show():tree.hide();$(">div>div:first,>div>a",node).click(function(){var $fnode=$(">li:first",tree);if($fnode.children(":first").isTag("a")){tree.subTree(op,op.level+1)}var $this=$(this);var isA=$this.isTag("a");var $this=isA?$(">div>div",node).eq(op.level):$this;if(!isA||tree.is(":hidden")){$this.toggleClass(op.exp).toggleClass(op.coll);if(op.icon){$(">div>div:last",node).toggleClass(op.options.folderExp).toggleClass(op.options.folderColl)}}(tree.is(":hidden"))?tree.slideDown("fast"):(isA?"":tree.slideUp("fast"));return false});addSpace(op.level,node);if(op.showSub){tree.subTree(op,op.level+1)}}else{node.children().wrap("<div></div>");$(">div",node).prepend("<div class='node'></div>"+(op.ckbox?"<div class='ckbox "+checked+"'></div>":"")+(op.icon?"<div class='file'></div>":""));addSpace(op.level,node);if(op.isLast){$(node).addClass("last")}}if(op.ckbox){node._check(op)}$(">div",node).mouseover(function(){$(this).addClass("hover")}).mouseout(function(){$(this).removeClass("hover")});if($.browser.msie){$(">div",node).click(function(){$("a",this).trigger("click");return false})}});function addSpace(level,node){if(level>0){var parent=node.parent().parent();var space=!parent.next()[0]?"indent":"line";var plist="<div class='"+space+"'></div>";if(level>1){var next=$(">div>div",parent).filter(":first");var prev="";while(level>1){prev=prev+"<div class='"+next.attr("class")+"'></div>";next=next.next();level--}plist=prev+plist}$(">div",node).prepend(plist)}}},_check:function(op){var node=$(this);var ckbox=$(">div>.ckbox",node);var $input=node.find("a");var tname=$input.attr("tname"),tvalue=$input.attr("tvalue");var attrs="text='"+$input.text()+"' ";if(tname){attrs+="name='"+tname+"' "}if(tvalue){attrs+="value='"+tvalue+"' "}ckbox.append("<input type='checkbox' style='display:none;' "+attrs+"/>").click(function(){var cked=ckbox.hasClass("checked");var aClass=cked?"unchecked":"checked";var rClass=cked?"checked":"unchecked";ckbox.removeClass(rClass).removeClass(!cked?"indeterminate":"").addClass(aClass);$("input",ckbox).attr("checked",!cked);$(">ul",node).find("li").each(function(){var box=$("div.ckbox",this);box.removeClass(rClass).removeClass(!cked?"indeterminate":"").addClass(aClass).find("input").attr("checked",!cked)});$(node)._checkParent();return false});var cAttr=$input.attr("checked")||false;if(cAttr){ckbox.find("input").attr("checked",true);ckbox.removeClass("unchecked").addClass("checked");$(node)._checkParent()}},_checkParent:function(){if($(this).parent().hasClass("tree")){return}var parent=$(this).parent().parent();var stree=$(">ul",parent);var ckbox=stree.find(">li>a").size()+stree.find("div.ckbox").size();var ckboxed=stree.find("div.checked").size();var aClass=(ckboxed==ckbox?"checked":(ckboxed!=0?"indeterminate":"unchecked"));var rClass=(ckboxed==ckbox?"indeterminate":(ckboxed!=0?"checked":"indeterminate"));$(">div>.ckbox",parent).removeClass("unchecked").removeClass("checked").removeClass(rClass).addClass(aClass);var $checkbox=$(":checkbox",parent);if(aClass=="checked"){$checkbox.attr("checked","checked")}else{if(aClass=="unchecked"){$checkbox.removeAttr("checked")}}parent._checkParent()}})})(jQuery);(function(a){var f=new Map();a.dwz=a.dwz||{};a(window).resize(function(){setTimeout(function(){for(var j=0;j<f.size();j++){d(f.element(j).key)}},100)});a.fn.extend({accordion:function(l,k){var j=Array.prototype.slice.call(arguments,1);return this.each(function(){if(l.fillSpace){f.put(l.fillSpace,this)}if(typeof l=="string"){var m=a.data(this,"dwz-accordion");m[l].apply(m,j)}else{if(!a(this).is(".dwz-accordion")){a.data(this,"dwz-accordion",new a.dwz.accordion(this,l))}}})},activate:function(j){return this.accordion("activate",j)}});a.dwz.accordion=function(j,m){this.options=m=a.extend({},a.dwz.accordion.defaults,m);this.element=j;a(j).addClass("dwz-accordion");if(m.navigation){var k=a(j).find("a").filter(m.navigationFilter);if(k.length){if(k.filter(m.header).length){m.active=k}else{m.active=k.parent().parent().prev();k.addClass("current")}}}m.headers=a(j).find(m.header);m.active=e(m.headers,m.active);if(m.fillSpace){d(m.fillSpace)}else{if(m.autoheight){var l=0;m.headers.next().each(function(){l=Math.max(l,a(this).outerHeight())}).height(l)}}m.headers.not(m.active||"").next().hide();m.active.find("h2").addClass(m.selectedClass);if(m.event){a(j).bind((m.event)+".dwz-accordion",b)}};a.dwz.accordion.prototype={activate:function(j){b.call(this.element,{target:e(this.options.headers,j)[0]})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.options.headers.next().css("display","");if(this.options.fillSpace||this.options.autoheight){this.options.headers.next().css("height","")}a.removeData(this.element,"dwz-accordion");a(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}};function g(j,k){return function(){return j.apply(k,arguments)}}function c(j){if(!a.data(this,"dwz-accordion")){return}var k=a.data(this,"dwz-accordion");var l=k.options;l.running=j?0:--l.running;if(l.running){return}if(l.clearStyle){l.toShow.add(l.toHide).css({height:"",overflow:""})}a(this).triggerHandler("change.dwz-accordion",[l.data],l.change)}function d(k){var l=f.get(k);if(!l){return}var n=a(l).parent();var j=n.height()-((a(".accordionHeader",l).size())*(a(".accordionHeader:first-child",l).outerHeight()))-2;var m=n.children().not(l);a.each(m,function(o){j-=a(m[o]).outerHeight()});a(".accordionContent",l).height(j)}function h(p,o,l,j,m){var n=a.data(this,"dwz-accordion").options;n.toShow=p;n.toHide=o;n.data=l;var k=g(c,this);n.running=o.size()==0?p.size():o.size();if(n.animated){if(!n.alwaysOpen&&j){a.dwz.accordion.animations[n.animated]({toShow:jQuery([]),toHide:o,complete:k,down:m,autoheight:n.autoheight})}else{a.dwz.accordion.animations[n.animated]({toShow:p,toHide:o,complete:k,down:m,autoheight:n.autoheight})}}else{if(!n.alwaysOpen&&j){p.toggle()}else{o.hide();p.show()}k(true)}}function b(n){var o=a.data(this,"dwz-accordion").options;if(o.disabled){return false}if(!n.target&&!o.alwaysOpen){o.active.find("h2").toggleClass(o.selectedClass);var p=o.active.next(),l={instance:this,options:o,newHeader:jQuery([]),oldHeader:o.active,newContent:jQuery([]),oldContent:p},q=o.active=a([]);h.call(this,q,p,l);return false}var j=a(n.target);if(j.parents(o.header).length){while(!j.is(o.header)){j=j.parent()}}var k=j[0]==o.active[0];if(o.running||(o.alwaysOpen&&k)){return false}if(!j.is(o.header)){return}o.active.find("h2").toggleClass(o.selectedClass);if(!k){j.find("h2").addClass(o.selectedClass)}var q=j.next(),p=o.active.next(),l={instance:this,options:o,newHeader:j,oldHeader:o.active,newContent:q,oldContent:p},m=o.headers.index(o.active[0])>o.headers.index(j[0]);o.active=k?a([]):j;h.call(this,q,p,l,k,m);return false}function e(j,k){return k!=undefined?typeof k=="number"?j.filter(":eq("+k+")"):j.not(j.not(k)):k===false?a([]):j.filter(":eq(0)")}a.extend(a.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:true,animated:"slide",event:"click",header:".accordionHeader",autoheight:true,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(m,j){m=a.extend({easing:"swing",duration:300},m,j);if(!m.toHide.size()){m.toShow.animate({height:"show"},m);return}var l=m.toHide.height(),n=m.toShow.height(),k=n/l;m.toShow.css({height:0}).show();m.toHide.filter(":hidden").each(m.complete).end().filter(":visible").animate({height:"hide"},{step:function(p){var o=(l-p)*k;if(a.browser.msie||a.browser.opera){o=Math.ceil(o)}m.toShow.height(o)},duration:m.duration,easing:m.easing,complete:function(){if(!m.autoheight){m.toShow.css({height:"auto"})}m.toShow.css({overflow:"auto"});m.complete()}})},bounceslide:function(j){this.slide(j,{easing:j.down?"bounceout":"swing",duration:j.down?1000:200})},easeslide:function(j){this.slide(j,{easing:"easeinout",duration:700})}}})})(jQuery);function initEnv(){$("body").append(DWZ.frag.dwzFrag);if($.browser.msie&&/6.0/.test(navigator.userAgent)){try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}if($.browser.msie){window.setInterval("CollectGarbage();",10000)}$(window).resize(function(){initLayout();$(this).trigger(DWZ.eventType.resizeGrid)});var a=$("#background,#progressBar");a.hide();$(document).ajaxStart(function(){a.show()}).ajaxStop(function(){a.hide()});$("#leftside").jBar({minW:150,maxW:700});if($.taskBar){$.taskBar.init()}navTab.init();if($.fn.switchEnv){$("#switchEnvBox").switchEnv()}if($.fn.navMenu){$("#navMenu").navMenu()}setTimeout(function(){initLayout();initUI();var c=$("div.tabsPageHeader");c.find(".tabsLeft").hoverClass("tabsLeftHover");c.find(".tabsRight").hoverClass("tabsRightHover");c.find(".tabsMore").hoverClass("tabsMoreHover")},10)}function initLayout(){var b=$(window).width()-(DWZ.ui.sbar?$("#sidebar").width()+10:34)-5;var a=$(window).height()-$("#header").height()-34;$("#container").width(b);$("#container .tabsPageContent").height(a-34).find("[layoutH]").layoutH();$("#sidebar, #sidebar_s .collapse, #splitBar, #splitBarProxy").height(a-5);$("#taskbar").css({top:a+$("#header").height()+5,width:$(window).width()})}function initUI(_box){var $p=$(_box||document);$("div.panel",$p).jPanel();$("table.table",$p).jTable();$("table.list",$p).cssTable();$("div.tabs",$p).each(function(){var $this=$(this);var options={};options.currentIndex=$this.attr("currentIndex")||0;options.eventType=$this.attr("eventType")||"click";$this.tabs(options)});$("ul.tree",$p).jTree();$("div.accordion",$p).each(function(){var $this=$(this);$this.accordion({fillSpace:$this.attr("fillSpace"),alwaysOpen:true,active:0})});$(":button.checkboxCtrl, :checkbox.checkboxCtrl",$p).checkboxCtrl($p);if($.fn.combox){$("select.combox",$p).combox()}if($.fn.xheditor){$("textarea.editor",$p).each(function(){var $this=$(this);var op={html5Upload:false,skin:"vista",tools:$this.attr("tools")||"full"};var upAttrs=[["upLinkUrl","upLinkExt","zip,rar,txt"],["upImgUrl","upImgExt","jpg,jpeg,gif,png"],["upFlashUrl","upFlashExt","swf"],["upMediaUrl","upMediaExt","avi"]];$(upAttrs).each(function(i){var urlAttr=upAttrs[i][0];var extAttr=upAttrs[i][1];if($this.attr(urlAttr)){op[urlAttr]=$this.attr(urlAttr);op[extAttr]=$this.attr(extAttr)||upAttrs[i][2]}});$this.xheditor(op)})}if($.fn.uploadify){$(":file[uploaderOption]",$p).each(function(){var $this=$(this);var options={fileObjName:$this.attr("name")||"file",auto:true,multi:true,onUploadError:uploadifyError};var uploaderOption=DWZ.jsonEval($this.attr("uploaderOption"));$.extend(options,uploaderOption);DWZ.debug("uploaderOption: "+DWZ.obj2str(uploaderOption));$this.uploadify(options)})}$("input[type=text], input[type=password], textarea",$p).addClass("textInput").focusClass("focus");$("input[readonly], textarea[readonly]",$p).addClass("readonly");$("input[disabled=true], textarea[disabled=true]",$p).addClass("disabled");$("input[type=text]",$p).not("div.tabs input[type=text]",$p).filter("[alt]").inputAlert();$("div.panelBar li, div.panelBar",$p).hoverClass("hover");$("div.button",$p).hoverClass("buttonHover");$("div.buttonActive",$p).hoverClass("buttonActiveHover");$("div.tabsHeader li, div.tabsPageHeader li, div.accordionHeader, div.accordion",$p).hoverClass("hover");$("form.required-validate",$p).each(function(){var $form=$(this);$form.validate({onsubmit:false,focusInvalid:false,focusCleanup:true,errorElement:"span",ignore:".ignore",invalidHandler:function(form,validator){var errors=validator.numberOfInvalids();if(errors){var message=DWZ.msg("validateFormError",[errors]);alertMsg.error(message)}}});$form.find("input[customvalid]").each(function(){var $input=$(this);$input.rules("add",{customvalid:$input.attr("customvalid")})})});if($.fn.datepicker){$("input.date",$p).each(function(){var $this=$(this);var opts={};if($this.attr("dateFmt")){opts.pattern=$this.attr("dateFmt")}if($this.attr("minDate")){opts.minDate=$this.attr("minDate")}if($this.attr("maxDate")){opts.maxDate=$this.attr("maxDate")}if($this.attr("mmStep")){opts.mmStep=$this.attr("mmStep")}if($this.attr("ssStep")){opts.ssStep=$this.attr("ssStep")}$this.datepicker(opts)})}$("a[target=navTab]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var tabid=$this.attr("rel")||"_blank";var fresh=eval($this.attr("fresh")||"true");var external=eval($this.attr("external")||"false");var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}navTab.openTab(tabid,url,{title:title,fresh:fresh,external:external});event.preventDefault()})});$("a[target=dialog]",$p).each(function(){$(this).click(function(event){var $this=$(this);var title=$this.attr("title")||$this.text();var rel=$this.attr("rel")||"_blank";var options={};var w=$this.attr("width");var h=$this.attr("height");if(w){options.width=w}if(h){options.height=h}options.max=eval($this.attr("max")||"false");options.mask=eval($this.attr("mask")||"false");options.maxable=eval($this.attr("maxable")||"true");options.minable=eval($this.attr("minable")||"true");options.fresh=eval($this.attr("fresh")||"true");options.resizable=eval($this.attr("resizable")||"true");options.drawable=eval($this.attr("drawable")||"true");options.close=eval($this.attr("close")||"");options.param=$this.attr("param")||"";var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));DWZ.debug(url);if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.pdialog.open(url,rel,title,options);return false})});$("a[target=ajax]",$p).each(function(){$(this).click(function(event){var $this=$(this);var rel=$this.attr("rel");if(rel){var $rel=$("#"+rel);$rel.loadUrl($this.attr("href"),{},function(){$rel.find("[layoutH]").layoutH()})}event.preventDefault()})});$("div.pagination",$p).each(function(){var $this=$(this);$this.pagination({targetType:$this.attr("targetType"),rel:$this.attr("rel"),totalCount:$this.attr("totalCount"),numPerPage:$this.attr("numPerPage"),pageNumShown:$this.attr("pageNumShown"),currentPage:$this.attr("currentPage")})});if($.fn.sortDrag){$("div.sortDrag",$p).sortDrag()}if($.fn.ajaxTodo){$("a[target=ajaxTodo]",$p).ajaxTodo()}if($.fn.dwzExport){$("a[target=dwzExport]",$p).dwzExport()}if($.fn.lookup){$("a[lookupGroup]",$p).lookup()}if($.fn.multLookup){$("[multLookup]:button",$p).multLookup()}if($.fn.suggest){$("input[suggestFields]",$p).suggest()}if($.fn.itemDetail){$("table.itemDetail",$p).itemDetail()}if($.fn.selectedTodo){$("a[target=selectedTodo]",$p).selectedTodo()}if($.fn.pagerForm){$("form[rel=pagerForm]",$p).pagerForm({parentBox:$p})}$.each(DWZ.regPlugins,function(index,fn){fn($p)})}(function(a){a.fn.extend({theme:function(d){var c=a.extend({themeBase:"themes"},d);var b=c.themeBase+"/#theme#/style.css";return this.each(function(){var e=a(this).find(">li[theme]");var f=function(h){a("head").find("link[href$='style.css']").attr("href",b.replace("#theme#",h));e.find(">div").removeClass("selected");e.filter("[theme="+h+"]").find(">div").addClass("selected");if(a.isFunction(a.cookie)){a.cookie("dwz_theme",h)}};e.each(function(j){var h=a(this);var k=h.attr("theme");h.addClass(k).click(function(){f(k)})});if(a.isFunction(a.cookie)){var g=a.cookie("dwz_theme");if(g){f(g)}}})}})})(jQuery);(function(a){a.fn.navMenu=function(){return this.each(function(){var e=a(this);e.find("li>a").click(function(){var f=a(this);a.post(f.attr("href"),{},function(g){a("#sidebar").find(".accordion").remove().end().append(g).initUI();e.find("li").removeClass("selected");f.parent().addClass("selected");navTab.closeAllTab()});return false})})};a.fn.switchEnv=function(){var e={cities$:">ul>li",boxTitle$:">a>span"};return this.each(function(){var f=a(this);f.click(function(){if(f.hasClass("selected")){c(f)}else{d(f)}return false});f.find(e.cities$).click(function(){var g=a(this);a.post(g.find(">a").attr("href"),{},function(h){c(f);f.find(e.boxTitle$).html(g.find(">a").html());navTab.closeAllTab();a("#sidebar").find(".accordion").remove().end().append(h).initUI()});return false})})};function d(e){e.addClass("selected");a(document).bind("click",{box:e},b)}function c(e){e.removeClass("selected");a(document).unbind("click",b)}function b(e){c(e.data.box)}})(jQuery);$.setRegional("alertMsg",{title:{error:"Error",info:"Information",warn:"Warning",correct:"Successful",confirm:"Confirmation"},butMsg:{ok:"OK",yes:"Yes",no:"No",cancel:"Cancel"}});var alertMsg={_boxId:"#alertMsgBox",_bgId:"#alertBackground",_closeTimer:null,_types:{error:"error",info:"info",warn:"warn",correct:"correct",confirm:"confirm"},_getTitle:function(a){return $.regional.alertMsg.title[a]},_keydownOk:function(a){if(a.keyCode==DWZ.keyCode.ENTER){a.data.target.trigger("click")}return false},_keydownEsc:function(a){if(a.keyCode==DWZ.keyCode.ESC){a.data.target.trigger("click")}},_open:function(k,h,c){$(this._boxId).remove();var b="";if(c){for(var d=0;d<c.length;d++){var j=c[d].call?"callback":"";b+=DWZ.frag.alertButFrag.replace("#butMsg#",c[d].name).replace("#callback#",j)}}var a=DWZ.frag.alertBoxFrag.replace("#type#",k).replace("#title#",this._getTitle(k)).replace("#message#",h).replace("#butFragment#",b);$(a).appendTo("body").css({top:-$(this._boxId).height()+"px"}).animate({top:"0px"},500);if(this._closeTimer){clearTimeout(this._closeTimer);this._closeTimer=null}if(this._types.info==k||this._types.correct==k){this._closeTimer=setTimeout(function(){alertMsg.close()},3500)}else{$(this._bgId).show()}var e=$(this._boxId).find("a.button");var f=e.filter("[rel=callback]");var g=$(document);for(var d=0;d<c.length;d++){if(c[d].call){f.eq(d).click(c[d].call)}if(c[d].keyCode==DWZ.keyCode.ENTER){g.bind("keydown",{target:e.eq(d)},this._keydownOk)}if(c[d].keyCode==DWZ.keyCode.ESC){g.bind("keydown",{target:e.eq(d)},this._keydownEsc)}}},close:function(){$(document).unbind("keydown",this._keydownOk).unbind("keydown",this._keydownEsc);$(this._boxId).animate({top:-$(this._boxId).height()},500,function(){$(this).remove()});$(this._bgId).hide()},error:function(a,b){this._alert(this._types.error,a,b)},info:function(a,b){this._alert(this._types.info,a,b)},warn:function(a,b){this._alert(this._types.warn,a,b)},correct:function(a,b){this._alert(this._types.correct,a,b)},_alert:function(e,b,d){var c={okName:$.regional.alertMsg.butMsg.ok,okCall:null};$.extend(c,d);var a=[{name:c.okName,call:c.okCall,keyCode:DWZ.keyCode.ENTER}];this._open(e,b,a)},confirm:function(b,d){var c={okName:$.regional.alertMsg.butMsg.ok,okCall:null,cancelName:$.regional.alertMsg.butMsg.cancel,cancelCall:null};$.extend(c,d);var a=[{name:c.okName,call:c.okCall,keyCode:DWZ.keyCode.ENTER},{name:c.cancelName,call:c.cancelCall,keyCode:DWZ.keyCode.ESC}];this._open(this._types.confirm,b,a)}};(function(a){var e,f,c;a.fn.extend({contextMenu:function(g,k){var j=a.extend({shadow:true,bindings:{},ctrSub:null},k);if(!e){e=a('<div id="contextmenu"></div>').appendTo("body").hide()}if(!f){f=a('<div id="contextmenuShadow"></div>').appendTo("body").hide()}c=c||[];c.push({id:g,shadow:j.shadow,bindings:j.bindings||{},ctrSub:j.ctrSub});var h=c.length-1;a(this).bind("contextmenu",function(l){b(h,this,l,j);return false});return this}});function b(k,o,j,l){var h=c[k];var g=a(DWZ.frag[h.id]);g.find("li").hoverClass();e.html(g);a.each(h.bindings,function(q,p){a("[rel='"+q+"']",e).bind("click",function(r){d();p(a(o),a("#"+h.id))})});var m=j.pageX;var n=j.pageY;if(a(window).width()<m+e.width()){m-=e.width()}if(a(window).height()<n+e.height()){n-=e.height()}e.css({left:m,top:n}).show();if(h.shadow){f.css({width:e.width(),height:e.height(),left:m+3,top:n+3}).show()}a(document).one("click",d);if(a.isFunction(h.ctrSub)){h.ctrSub(a(o),a("#"+h.id))}}function d(){e.hide();f.hide()}})(jQuery);var navTab={componentBox:null,_tabBox:null,_prevBut:null,_nextBut:null,_panelBox:null,_moreBut:null,_moreBox:null,_currentIndex:0,_op:{id:"navTab",stTabBox:".navTab-tab",stPanelBox:".navTab-panel",mainTabId:"main",close$:"a.close",prevClass:"tabsLeft",nextClass:"tabsRight",stMore:".tabsMore",stMoreLi:"ul.tabsMoreList"},init:function(b){if($.History){$.History.init("#container")}var a=this;$.extend(this._op,b);this.componentBox=$("#"+this._op.id);this._tabBox=this.componentBox.find(this._op.stTabBox);this._panelBox=this.componentBox.find(this._op.stPanelBox);this._prevBut=this.componentBox.find("."+this._op.prevClass);this._nextBut=this.componentBox.find("."+this._op.nextClass);this._moreBut=this.componentBox.find(this._op.stMore);this._moreBox=this.componentBox.find(this._op.stMoreLi);this._prevBut.click(function(c){a._scrollPrev()});this._nextBut.click(function(c){a._scrollNext()});this._moreBut.click(function(){a._moreBox.show();return false});$(document).click(function(){a._moreBox.hide()});this._contextmenu(this._tabBox);this._contextmenu(this._getTabs());this._init();this._ctrlScrollBut()},_init:function(){var a=this;this._getTabs().each(function(b){$(this).unbind("click").click(function(c){a._switchTab(b)});$(this).find(navTab._op.close$).unbind("click").click(function(){a._closeTab(b)})});this._getMoreLi().each(function(b){$(this).find(">a").unbind("click").click(function(c){a._switchTab(b)})});this._switchTab(this._currentIndex)},_contextmenu:function(a){var b=this;a.contextMenu("navTabCM",{bindings:{reload:function(d,c){b._reload(d,true)},closeCurrent:function(d,c){var e=d.attr("tabid");if(e){b.closeTab(e)}else{b.closeCurrentTab()}},closeOther:function(e,d){var c=b._indexTabId(e.attr("tabid"));b._closeOtherTab(c>0?c:b._currentIndex)},closeAll:function(d,c){b.closeAllTab()}},ctrSub:function(j,d){var h=d.find("[rel='reload']");var f=d.find("[rel='closeCurrent']");var g=d.find("[rel='closeOther']");var e=d.find("[rel='closeAll']");var c=b._getTabs();if(c.size()<2){f.addClass("disabled");g.addClass("disabled");e.addClass("disabled")}if(b._currentIndex==0||j.attr("tabid")==b._op.mainTabId){f.addClass("disabled");h.addClass("disabled")}else{if(c.size()==2){g.addClass("disabled")}}}})},_getTabs:function(){return this._tabBox.find("> li")},_getPanels:function(){return this._panelBox.find("> div")},_getMoreLi:function(){return this._moreBox.find("> li")},_getTab:function(b){var a=this._indexTabId(b);if(a>=0){return this._getTabs().eq(a)}},getPanel:function(b){var a=this._indexTabId(b);if(a>=0){return this._getPanels().eq(a)}},_getTabsW:function(b,a){return this._tabsW(this._getTabs().slice(b,a))},_tabsW:function(a){var b=0;a.each(function(){b+=$(this).outerWidth(true)});return b},_indexTabId:function(b){if(!b){return -1}var a=-1;this._getTabs().each(function(c){if($(this).attr("tabid")==b){a=c;return}});return a},_getLeft:function(){return this._tabBox.position().left},_getScrollBarW:function(){return this.componentBox.width()-55},_visibleStart:function(){var c=this._getLeft(),d=0;var a=this._getTabs();for(var b=0;b<a.size();b++){if(d+c>=0){return b}d+=a.eq(b).outerWidth(true)}return 0},_visibleEnd:function(){var c=this._getLeft(),d=0;var a=this._getTabs();for(var b=0;b<a.size();b++){d+=a.eq(b).outerWidth(true);if(d+c>this._getScrollBarW()){return b}}return a.size()},_scrollPrev:function(){var a=this._visibleStart();if(a>0){this._scrollTab(-this._getTabsW(0,a-1))}},_scrollNext:function(){var a=this._visibleEnd();if(a<this._getTabs().size()){this._scrollTab(-this._getTabsW(0,a+1)+this._getScrollBarW())}},_scrollTab:function(b,c){var a=this;this._tabBox.animate({left:b+"px"},200,function(){a._ctrlScrollBut()})},_scrollCurrent:function(){var a=this._tabsW(this._getTabs());if(a<=this._getScrollBarW()){this._scrollTab(0)}else{if(this._getLeft()<this._getScrollBarW()-a){this._scrollTab(this._getScrollBarW()-a)}else{if(this._currentIndex<this._visibleStart()){this._scrollTab(-this._getTabsW(0,this._currentIndex))}else{if(this._currentIndex>=this._visibleEnd()){this._scrollTab(this._getScrollBarW()-this._getTabs().eq(this._currentIndex).outerWidth(true)-this._getTabsW(0,this._currentIndex))}}}}},_ctrlScrollBut:function(){var a=this._tabsW(this._getTabs());if(this._getScrollBarW()>a){this._prevBut.hide();this._nextBut.hide();this._tabBox.parent().removeClass("tabsPageHeaderMargin")}else{this._prevBut.show().removeClass("tabsLeftDisabled");this._nextBut.show().removeClass("tabsRightDisabled");this._tabBox.parent().addClass("tabsPageHeaderMargin");if(this._getLeft()>=0){this._prevBut.addClass("tabsLeftDisabled")}else{if(this._getLeft()<=this._getScrollBarW()-a){this._nextBut.addClass("tabsRightDisabled")}}}},_switchTab:function(b){var a=this._getTabs().removeClass("selected").eq(b).addClass("selected");if(DWZ.ui.hideMode=="offsets"){this._getPanels().css({position:"absolute",top:"-100000px",left:"-100000px"}).eq(b).css({position:"",top:"",left:""})}else{this._getPanels().hide().eq(b).show()}this._getMoreLi().removeClass("selected").eq(b).addClass("selected");this._currentIndex=b;this._scrollCurrent();this._reload(a)},_closeTab:function(a,c){this._getTabs().eq(a).remove();this._getPanels().eq(a).trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().eq(a).remove();if(this._currentIndex>=a){this._currentIndex--}if(c){var b=this._indexTabId(c);if(b>0){this._currentIndex=b}}this._init();this._scrollCurrent();this._reload(this._getTabs().eq(this._currentIndex))},closeTab:function(b){var a=this._indexTabId(b);if(a>0){this._closeTab(a)}},closeCurrentTab:function(a){if(this._currentIndex>0){this._closeTab(this._currentIndex,a)}},closeAllTab:function(){this._getTabs().filter(":gt(0)").remove();this._getPanels().filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().filter(":gt(0)").remove();this._currentIndex=0;this._init();this._scrollCurrent()},_closeOtherTab:function(a){a=a||this._currentIndex;if(a>0){var b=":eq("+a+")";this._getTabs().not(b).filter(":gt(0)").remove();this._getPanels().not(b).filter(":gt(0)").trigger(DWZ.eventType.pageClear).remove();this._getMoreLi().not(b).filter(":gt(0)").remove();this._currentIndex=1;this._init();this._scrollCurrent()}else{this.closeAllTab()}},_loadUrlCallback:function(a){a.find("[layoutH]").layoutH();a.find(":button.close").click(function(){navTab.closeCurrentTab()})},_reload:function(c,e){e=e||c.data("reloadFlag");var f=c.attr("url");if(e&&f){c.data("reloadFlag",null);var b=this.getPanel(c.attr("tabid"));if(c.hasClass("external")){navTab.openExternal(f,b)}else{var a=$("#pagerForm",b);var d=a.size()>0?a.serializeArray():{};b.loadUrl(f,d,function(){navTab._loadUrlCallback(b)})}}},reloadFlag:function(b){var a=this._getTab(b);if(a){if(this._indexTabId(b)==this._currentIndex){this._reload(a,true)}else{a.data("reloadFlag",1)}}},reload:function(f,e){var d=$.extend({data:{},navTabId:"",callback:null},e);var c=d.navTabId?this._getTab(d.navTabId):this._getTabs().eq(this._currentIndex);var b=d.navTabId?this.getPanel(d.navTabId):this._getPanels().eq(this._currentIndex);if(b){if(!f){f=c.attr("url")}if(f){if(c.hasClass("external")){navTab.openExternal(f,b)}else{if($.isEmptyObject(d.data)){var a=$("#pagerForm",b);d.data=a.size()>0?a.serializeArray():{}}b.ajaxUrl({type:"POST",url:f,data:d.data,callback:function(g){navTab._loadUrlCallback(b);if($.isFunction(d.callback)){d.callback(g)}}})}}}},getCurrentPanel:function(){return this._getPanels().eq(this._currentIndex)},checkTimeout:function(){var a=DWZ.jsonEval(this.getCurrentPanel().html());if(a&&a[DWZ.keys.statusCode]==DWZ.statusCode.timeout){this.closeCurrentTab()}},openExternal:function(c,a){var b=navTab._panelBox.height();a.html(DWZ.frag.externalFrag.replaceAll("{url}",c).replaceAll("{height}",b+"px"))},openTab:function(j,k,f){var e=$.extend({title:"New Tab",type:"GET",data:{},fresh:true,external:false},f);var d=this._indexTabId(j);if(d>=0){var b=this._getTabs().eq(d);var g=b.attr("tabid")==this._op.mainTabId?"> span > span":"> span";b.find(">a").attr("title",e.title).find(g).html(e.title);var a=this._getPanels().eq(d);if(e.fresh||b.attr("url")!=k){b.attr("url",k);if(e.external||k.isExternalUrl()){b.addClass("external");navTab.openExternal(k,a)}else{b.removeClass("external");a.ajaxUrl({type:e.type,url:k,data:e.data,callback:function(){navTab._loadUrlCallback(a)}})}}this._currentIndex=d}else{var h='<li tabid="#tabid#"><a href="javascript:" title="#title#" class="#tabid#"><span>#title#</span></a><a href="javascript:;" class="close">close</a></li>';this._tabBox.append(h.replaceAll("#tabid#",j).replaceAll("#title#",e.title));this._panelBox.append('<div class="page unitBox"></div>');this._moreBox.append('<li><a href="javascript:" title="#title#">#title#</a></li>'.replaceAll("#title#",e.title));var c=this._getTabs();var b=c.filter(":last");var a=this._getPanels().filter(":last");if(e.external||k.isExternalUrl()){b.addClass("external");navTab.openExternal(k,a)}else{b.removeClass("external");a.ajaxUrl({type:e.type,url:k,data:e.data,callback:function(){navTab._loadUrlCallback(a)}})}if($.History){setTimeout(function(){$.History.addHistory(j,function(m){var l=navTab._indexTabId(m);if(l>=0){navTab._switchTab(l)}},j)},10)}this._currentIndex=c.size()-1;this._contextmenu(c.filter(":last").hoverClass("hover"))}this._init();this._scrollCurrent();this._getTabs().eq(this._currentIndex).attr("url",k)}};(function(a){a.fn.extend({tabs:function(d){var c=a.extend({reverse:false,eventType:"click",currentIndex:0,stTabHeader:"> .tabsHeader",stTab:">.tabsHeaderContent>ul",stTabPanel:"> .tabsContent",ajaxClass:"j-ajax",closeClass:"close",prevClass:"tabsLeft",nextClass:"tabsRight"},d);return this.each(function(){b(a(this))});function b(h){var g=h.add(a("> *",h));var j=a(c.stTabHeader,g);var k=a(c.stTab+" li",j);var f=a(c.stTabPanel+" > *",g);k.unbind().find("a").unbind();j.find("."+c.prevClass).unbind();j.find("."+c.nextClass).unbind();k.each(function(l){if(c.currentIndex==l){a(this).addClass("selected")}else{a(this).removeClass("selected")}if(c.eventType=="hover"){a(this).hover(function(m){e(h,l)})}else{a(this).click(function(m){e(h,l)})}a("a",this).each(function(){if(a(this).hasClass(c.ajaxClass)){a(this).click(function(m){var n=f.eq(l);if(this.href&&!n.attr("loaded")){n.loadUrl(this.href,{},function(){n.find("[layoutH]").layoutH();n.attr("loaded",true)})}m.preventDefault()})}else{if(a(this).hasClass(c.closeClass)){a(this).click(function(m){k.eq(l).remove();f.eq(l).remove();if(l==c.currentIndex){c.currentIndex=(l+1<k.size())?l:l-1}else{if(l<c.currentIndex){c.currentIndex=l}}b(h);return false})}}})});e(h,c.currentIndex)}function e(k,f){var j=k.add(a("> *",k));var m=a(c.stTabHeader,j);var n=a(c.stTab+" li",m);var h=a(c.stTabPanel+" > *",j);var l=n.eq(f);var g=h.eq(f);if(c.reverse&&(l.hasClass("selected"))){n.removeClass("selected");h.hide()}else{c.currentIndex=f;n.removeClass("selected");l.addClass("selected");h.hide().eq(c.currentIndex).show()}if(!g.attr("inited")){g.attr("inited",1000).find("input[type=text]").filter("[alt]").inputAlert()}}}})})(jQuery);(function(a){a.fn.extend({jresize:function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div[class^='resizable']",c).each(function(){a(this).hide()})})}}return this.each(function(){var c=a(this);var d=a(".resizable");a("div[class^='resizable']",c).each(function(){var e=this;a(e).mousedown(function(f){a.pdialog.switchDialog(c);a.resizeTool.start(d,c,f,a(e).attr("tar"));return false}).show()})})}});a.resizeTool={start:function(d,b,c,f){a.pdialog.initResize(d,b,f);a.data(d[0],"layer-drag",{options:a.extend(a.pdialog._op,{target:f,dialog:b,stop:a.resizeTool.stop})});a.layerdrag.start(d[0],c,a.pdialog._op)},stop:function(){var b=a.data(arguments[0],"layer-drag");a.pdialog.resizeDialog(arguments[0],b.options.dialog,b.options.target);a("body").css("cursor","");a(arguments[0]).hide()}};a.layerdrag={start:function(c,b,d){if(!a.layerdrag.current){a.layerdrag.current={el:c,oleft:parseInt(c.style.left)||0,owidth:parseInt(c.style.width)||0,otop:parseInt(c.style.top)||0,oheight:parseInt(c.style.height)||0,ox:b.pageX||b.screenX,oy:b.pageY||b.clientY};a(document).bind("mouseup",a.layerdrag.stop);a(document).bind("mousemove",a.layerdrag.drag)}return a.layerdrag.preventEvent(b)},drag:function(d){if(!d){var d=window.event}var b=a.layerdrag.current;var c=a.data(b.el,"layer-drag");var g=(d.pageX||d.screenX)-b.ox;var j=(d.pageY||d.clientY)-b.oy;if((d.pageY||d.clientY)<=0||(d.pageY||d.clientY)>=(a(window).height()-a(".dialogHeader",a(c.options.dialog)).outerHeight())){return false}var h=c.options.target;var k=b.owidth;var f=b.oheight;if(h!="n"&&h!="s"){k+=(h.indexOf("w")>=0)?-g:g}if(k>=a.pdialog._op.minW){if(h.indexOf("w")>=0){b.el.style.left=(b.oleft+g)+"px"}if(h!="n"&&h!="s"){b.el.style.width=k+"px"}}if(h!="w"&&h!="e"){f+=(h.indexOf("n")>=0)?-j:j}if(f>=a.pdialog._op.minH){if(h.indexOf("n")>=0){b.el.style.top=(b.otop+j)+"px"}if(h!="w"&&h!="e"){b.el.style.height=f+"px"}}return a.layerdrag.preventEvent(d)},stop:function(d){var b=a.layerdrag.current;var c=a.data(b.el,"layer-drag");a(document).unbind("mousemove",a.layerdrag.drag);a(document).unbind("mouseup",a.layerdrag.stop);if(c.options.stop){c.options.stop.apply(b.el,[b.el])}a.layerdrag.current=null;return a.layerdrag.preventEvent(d)},preventEvent:function(b){if(b.stopPropagation){b.stopPropagation()}if(b.preventDefault){b.preventDefault()}return false}}})(jQuery);(function(a){a.pdialog={_op:{height:300,width:580,minH:40,minW:50,total:20,max:false,mask:false,resizable:true,drawable:true,maxable:true,minable:true,fresh:true},_current:null,_zIndex:42,getCurrent:function(){return this._current},reload:function(f,e){var d=a.extend({data:{},dialogId:"",callback:null},e);var b=(d.dialogId&&a("body").data(d.dialogId))||this._current;if(b){var c=b.find(".dialogContent");c.ajaxUrl({type:"POST",url:f,data:d.data,callback:function(g){c.find("[layoutH]").layoutH(c);a(".pageContent",b).width(a(b).width()-14);a(":button.close",b).click(function(){a.pdialog.close(b);return false});if(a.isFunction(d.callback)){d.callback(g)}}})}},open:function(h,c,g,f){var e=a.extend({},a.pdialog._op,f);var b=a("body").data(c);if(b){if(b.is(":hidden")){b.show()}if(e.fresh||h!=a(b).data("url")){b.data("url",h);b.find(".dialogHeader").find("h1").html(g);this.switchDialog(b);var d=b.find(".dialogContent");d.loadUrl(h,{},function(){d.find("[layoutH]").layoutH(d);a(".pageContent",b).width(a(b).width()-14);a("button.close").click(function(){a.pdialog.close(b);return false})})}}else{a("body").append(DWZ.frag.dialogFrag);b=a(">.dialog:last-child","body");b.data("id",c);b.data("url",h);if(f.close){b.data("close",f.close)}if(f.param){b.data("param",f.param)}(a.fn.bgiframe&&b.bgiframe());b.find(".dialogHeader").find("h1").html(g);a(b).css("zIndex",(a.pdialog._zIndex+=2));a("div.shadow").css("zIndex",a.pdialog._zIndex-3).show();a.pdialog._init(b,f);a(b).click(function(){a.pdialog.switchDialog(b)});if(e.resizable){b.jresize()}if(e.drawable){b.dialogDrag()}a("a.close",b).click(function(j){a.pdialog.close(b);return false});if(e.maxable){a("a.maximize",b).show().click(function(j){a.pdialog.switchDialog(b);a.pdialog.maxsize(b);b.jresize("destroy").dialogDrag("destroy");return false})}else{a("a.maximize",b).hide()}a("a.restore",b).click(function(j){a.pdialog.restore(b);b.jresize().dialogDrag();return false});if(e.minable){a("a.minimize",b).show().click(function(j){a.pdialog.minimize(b);return false})}else{a("a.minimize",b).hide()}a("div.dialogHeader a",b).mousedown(function(){return false});a("div.dialogHeader",b).dblclick(function(){if(a("a.restore",b).is(":hidden")){a("a.maximize",b).trigger("click")}else{a("a.restore",b).trigger("click")}});if(e.max){a.pdialog.maxsize(b);b.jresize("destroy").dialogDrag("destroy")}a("body").data(c,b);a.pdialog._current=b;a.pdialog.attachShadow(b);var d=a(".dialogContent",b);d.loadUrl(h,{},function(){d.find("[layoutH]").layoutH(d);a(".pageContent",b).width(a(b).width()-14);a("button.close").click(function(){a.pdialog.close(b);return false})})}if(e.mask){a(b).css("zIndex",1000);a("a.minimize",b).hide();a(b).data("mask",true);a("#dialogBackground").show()}else{if(e.minable){a.taskBar.addDialog(c,g)}}},switchDialog:function(c){var d=a(c).css("zIndex");a.pdialog.attachShadow(c);if(a.pdialog._current){var b=a(a.pdialog._current).css("zIndex");a(a.pdialog._current).css("zIndex",d);a(c).css("zIndex",b);a("div.shadow").css("zIndex",b-1);a.pdialog._current=c}a.taskBar.switchTask(c.data("id"))},attachShadow:function(b){var c=a("div.shadow");if(c.is(":hidden")){c.show()}c.css({top:parseInt(a(b)[0].style.top)-2,left:parseInt(a(b)[0].style.left)-4,height:parseInt(a(b).height())+8,width:parseInt(a(b).width())+8,zIndex:parseInt(a(b).css("zIndex"))-1});a(".shadow_c",c).children().andSelf().each(function(){a(this).css("height",a(b).outerHeight()-4)})},_init:function(b,f){var e=a.extend({},this._op,f);var c=e.height>e.minH?e.height:e.minH;var g=e.width>e.minW?e.width:e.minW;if(isNaN(b.height())||b.height()<c){a(b).height(c+"px");a(".dialogContent",b).height(c-a(".dialogHeader",b).outerHeight()-a(".dialogFooter",b).outerHeight()-6)}if(isNaN(b.css("width"))||b.width()<g){a(b).width(g+"px")}var d=(a(window).height()-b.height())/2;b.css({left:(a(window).width()-b.width())/2,top:d>0?d:0})},initResize:function(c,b,d){a("body").css("cursor",d+"-resize");c.css({top:a(b).css("top"),left:a(b).css("left"),height:a(b).css("height"),width:a(b).css("width")});c.show()},repaint:function(d,b){var c=a("div.shadow");if(d!="w"&&d!="e"){c.css("height",c.outerHeight()+b.tmove);a(".shadow_c",c).children().andSelf().each(function(){a(this).css("height",a(this).outerHeight()+b.tmove)})}if(d=="n"||d=="nw"||d=="ne"){c.css("top",b.otop-2)}if(b.owidth&&(d!="n"||d!="s")){c.css("width",b.owidth+8)}if(d.indexOf("w")>=0){c.css("left",b.oleft-4)}},resizeTool:function(c,d,b){a("div[class^='resizable']",b).filter(function(){return a(this).attr("tar")=="w"||a(this).attr("tar")=="e"}).each(function(){a(this).css("height",a(this).outerHeight()+d)})},resizeDialog:function(e,c,h){var f=parseInt(e.style.left);var g=parseInt(e.style.top);var d=parseInt(e.style.height);var j=parseInt(e.style.width);if(h=="n"||h=="nw"){tmove=parseInt(a(c).css("top"))-g}else{tmove=d-parseInt(a(c).css("height"))}a(c).css({left:f,width:j,top:g,height:d});a(".dialogContent",c).css("width",(j-12)+"px");a(".pageContent",c).css("width",(j-14)+"px");if(h!="w"&&h!="e"){var b=a(".dialogContent",c);b.css({height:d-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6});b.find("[layoutH]").layoutH(b);a.pdialog.resizeTool(h,tmove,c)}a.pdialog.repaint(h,{oleft:f,otop:g,tmove:tmove,owidth:j});a(window).trigger(DWZ.eventType.resizeGrid)},close:function(c){if(typeof c=="string"){c=a("body").data(c)}var b=c.data("close");var d=true;if(b&&a.isFunction(b)){var e=c.data("param");if(e&&e!=""){e=DWZ.jsonEval(e);d=b(e)}else{d=b()}if(!d){return}}a(c).hide();a("div.shadow").hide();if(a(c).data("mask")){a("#dialogBackground").hide()}else{if(a(c).data("id")){a.taskBar.closeDialog(a(c).data("id"))}}a("body").removeData(a(c).data("id"));a(c).trigger(DWZ.eventType.pageClear).remove()},closeCurrent:function(){this.close(a.pdialog._current)},checkTimeout:function(){var b=a(".dialogContent",a.pdialog._current);var c=DWZ.jsonEval(b.html());if(c&&c[DWZ.keys.statusCode]==DWZ.statusCode.timeout){this.closeCurrent()}},maxsize:function(b){a(b).data("original",{top:a(b).css("top"),left:a(b).css("left"),width:a(b).css("width"),height:a(b).css("height")});a("a.maximize",b).hide();a("a.restore",b).show();var d=a(window).width();var c=a(window).height()-34;a(b).css({top:"0px",left:"0px",width:d+"px",height:c+"px"});a.pdialog._resizeContent(b,d,c)},restore:function(c){var e=a(c).data("original");var d=parseInt(e.width);var b=parseInt(e.height);a(c).css({top:e.top,left:e.left,width:d,height:b});a.pdialog._resizeContent(c,d,b);a("a.maximize",c).show();a("a.restore",c).hide();a.pdialog.attachShadow(c)},minimize:function(b){a(b).hide();a("div.shadow").hide();var c=a.taskBar.getTask(a(b).data("id"));a(".resizable").css({top:a(b).css("top"),left:a(b).css("left"),height:a(b).css("height"),width:a(b).css("width")}).show().animate({top:a(window).height()-60,left:c.position().left,width:c.outerWidth(),height:c.outerHeight()},250,function(){a(this).hide();a.taskBar.inactive(a(b).data("id"))})},_resizeContent:function(c,e,d){var b=a(".dialogContent",c);b.css({width:(e-12)+"px",height:d-a(".dialogHeader",c).outerHeight()-a(".dialogFooter",c).outerHeight()-6});b.find("[layoutH]").layoutH(b);a(".pageContent",c).css("width",(e-14)+"px");a(window).trigger(DWZ.eventType.resizeGrid)}}})(jQuery);(function(a){a.fn.dialogDrag=function(b){if(typeof b=="string"){if(b=="destroy"){return this.each(function(){var c=this;a("div.dialogHeader",c).unbind("mousedown")})}}return this.each(function(){var c=a(this);a("div.dialogHeader",c).mousedown(function(d){a.pdialog.switchDialog(c);c.data("task",true);setTimeout(function(){if(c.data("task")){a.dialogDrag.start(c,d)}},100);return false}).mouseup(function(d){c.data("task",false);return false})})};a.dialogDrag={currId:null,_init:function(b){this.currId=new Date().getTime();var c=a("#dialogProxy");if(!c.size()){c=a(DWZ.frag.dialogProxy);a("body").append(c)}a("h1",c).html(a(".dialogHeader h1",b).text())},start:function(b,c){this._init(b);var d=a("#dialogProxy");d.css({left:b.css("left"),top:b.css("top"),height:b.css("height"),width:b.css("width"),zIndex:parseInt(b.css("zIndex"))+1}).show();a("div.dialogContent",d).css("height",a("div.dialogContent",b).css("height"));d.data("dialog",b);b.css({left:"-10000px",top:"-10000px"});a(".shadow").hide();a(d).jDrag({selector:".dialogHeader",stop:this.stop,event:c});return false},stop:function(){var c=a(arguments[0]);var b=c.data("dialog");a(b).css({left:a(c).css("left"),top:a(c).css("top")});a.pdialog.attachShadow(b);a(c).hide()}}})(jQuery);(function(a){var b={cursor:"move",sortBoxs:"div.sortDrag",replace:false,items:"> *",selector:"",zIndex:1000};var c={start:function(g,e,h,j){var f=this._createPlaceholder(e);var d=e.clone();var k=e.position();d.data("$sortBox",g).data("op",j).data("$item",e).data("$placeholder",f);d.addClass("sortDragHelper").css({position:"absolute",top:k.top+g.scrollTop(),left:k.left,zIndex:j.zIndex,width:e.width()+"px",height:e.height()+"px"}).jDrag({selector:j.selector,drag:this.drag,stop:this.stop,event:h});e.before(f).before(d).hide();return false},drag:function(k,l){var d=a(arguments[0]),h=d.data("$sortBox"),g=d.data("$placeholder");var e=h.find(d.data("op")["items"]).filter(":visible").filter(":not(.sortDragPlaceholder, .sortDragHelper)");var n=d.position(),m=e.eq(0).position();var f=c._getOverSortBox(d,l);if(f.length>0&&f[0]!=h[0]){g.appendTo(f);d.data("$sortBox",f)}else{for(var o=0;o<e.length;o++){var j=e.eq(o),p=j.position();if(n.top>p.top+10){j.after(g)}else{if(n.top<=p.top){j.before(g);break}}}}},stop:function(){var d=a(arguments[0]),g=d.data("$sortBox"),e=d.data("$item"),f=d.data("$placeholder");var h=f.position();d.animate({top:(h.top+g.scrollTop())+"px",left:h.left+"px"},{complete:function(){if(d.data("op")["replace"]){$srcBox=e.parents(b.sortBoxs+":first");$destBox=f.parents(b.sortBoxs+":first");if($srcBox[0]!=$destBox[0]){$replaceItem=f.next();if($replaceItem.size()>0){$replaceItem.insertAfter(e)}}}e.insertAfter(f).show();f.remove();d.remove()},duration:300})},_createPlaceholder:function(d){return a("<"+d[0].nodeName+' class="sortDragPlaceholder"/>').css({width:d.outerWidth()+"px",height:d.outerHeight()+"px",marginTop:d.css("marginTop"),marginRight:d.css("marginRight"),marginBottom:d.css("marginBottom"),marginLeft:d.css("marginLeft")})},_getOverSortBox:function(d,f){var g=d.position();var j=g.top+(d.height()/2),h=g.left+(d.width()/2);return a(b.sortBoxs).filter(":visible").filter(function(){var e=a(this),l=e.position(),k=e.height(),m=e.width();return DWZ.isOver(j,h,l.top,l.left,k,m)})}};a.fn.sortDrag=function(d){return this.each(function(){var f=a.extend({},b,d);var e=a(this);if(e.attr("selector")){f.selector=e.attr("selector")}e.find(f.items).each(function(j){var g=a(this),h=g;if(f.selector){h=g.find(f.selector).css({cursor:f.cursor})}h.mousedown(function(k){c.start(e,g,k,f);k.preventDefault()})})})}})(jQuery);(function(a){a.fn.extend({cssTable:function(b){return this.each(function(){var d=a(this);var e=d.find("tbody>tr");var c=d.parent();var f=d.hasClass("nowrap");e.hoverClass("hover").each(function(h){var g=a(this);if(!f&&h%2==1){g.addClass("trbg")}g.click(function(){e.filter(".selected").removeClass("selected");g.addClass("selected");var j=g.attr("target");if(j){if(a("#"+j,c).size()==0){c.prepend('<input id="'+j+'" type="hidden" />')}a("#"+j,c).val(g.attr("rel"))}})});d.find("thead [orderField]").orderBy({targetType:d.attr("targetType"),rel:d.attr("rel"),asc:d.attr("asc")||"asc",desc:d.attr("desc")||"desc"})})}})})(jQuery);(function(a){a.fn.jTable=function(b){return this.each(function(){var d=a(this),r=d.attr("nowrapTD");var z=d.width();var j=[];var e=d.parent().addClass("j-resizeGrid");var p=a(this).attr("layoutH");var s=d.find("thead>tr:last-child").find("th");for(var m=0,n=s.size();m<n;m++){var f=a(s[m]);var u=[],A=f.innerWidth()-(100*f.innerWidth()/z)-2;u[0]=parseInt(A);u[1]=f.attr("align");j[j.length]=u}a(this).wrap("<div class='grid'></div>");var c=d.parent().html(d.html());var w=c.find("thead");w.wrap("<div class='gridHeader'><div class='gridThead'><table style='width:"+(z-20)+"px;'></table></div></div>");var o=a(">tr:last-child",w);var x=a(">th",o);a("th",w).each(function(){var l=a(this);l.html("<div class='gridCol' title='"+l.text()+"'>"+l.html()+"</div>")});x.each(function(B){var l=a(this),C=j[B];l.addClass(C[1]).hoverClass("hover").removeAttr("align").removeAttr("width").width(C[0])}).filter("[orderField]").orderBy({targetType:d.attr("targetType"),rel:d.attr("rel"),asc:d.attr("asc")||"asc",desc:d.attr("desc")||"desc"});var v=c.find(">tbody");var q=p?" layoutH='"+p+"'":"";v.wrap("<div class='gridScroller'"+q+" style='width:"+e.width()+"px;'><div class='gridTbody'><table style='width:"+(z-20)+"px;'></table></div></div>");var k=a(">tr:first-child",v);var g=v.find(">tr");g.hoverClass().each(function(){var C=a(this);var B=a(">td",this);for(var D=0;D<B.size();D++){var l=a(B[D]);if(r!="false"){l.html("<div>"+l.html()+"</div>")}if(D<j.length){l.addClass(j[D][1])}}C.click(function(){g.filter(".selected").removeClass("selected");C.addClass("selected");var E=C.attr("target");if(E){if(a("#"+E,c).size()==0){c.prepend('<input id="'+E+'" type="hidden" />')}a("#"+E,c).val(C.attr("rel"))}})});a(">td",k).each(function(l){if(l<j.length){a(this).width(j[l][0])}});c.append("<div class='resizeMarker' style='height:300px; left:57px;display:none;'></div><div class='resizeProxy' style='height:300px; left:377px;display:none;'></div>");var t=a(".gridScroller",c);t.scroll(function(l){var B=a(".gridThead",c);if(t.scrollLeft()>0){B.css("position","relative");var C=t.scrollLeft();B.css("left",t.cssv("left")-C)}if(t.scrollLeft()==0){B.css("position","relative");B.css("left","0px")}return false});a(">tr",w).each(function(){a(">th",this).each(function(B){var C=this,l=a(this);l.mouseover(function(D){var E=a.jTableTool.getOffset(C,D).offsetX;if(l.outerWidth()-E<5){l.css("cursor","col-resize").mousedown(function(F){a(".resizeProxy",c).show().css({left:a.jTableTool.getRight(C)-a(".gridScroller",c).scrollLeft(),top:a.jTableTool.getTop(C),height:a.jTableTool.getHeight(C,c),cursor:"col-resize"});a(".resizeMarker",c).show().css({left:a.jTableTool.getLeft(C)+1-a(".gridScroller",c).scrollLeft(),top:a.jTableTool.getTop(C),height:a.jTableTool.getHeight(C,c)});a(".resizeProxy",c).jDrag(a.extend(b,{scop:true,cellMinW:20,relObj:a(".resizeMarker",c)[0],move:"horizontal",event:F,stop:function(){var P=a(".resizeProxy",c).position().left;var L=a(".resizeMarker",c).position().left;var M=P-L-l.outerWidth()-9;var K=a.jTableTool.getColspan(l);var J=a.jTableTool.getCellNum(l);var O=l.width(),N=l.width()+M;var G=a(">td",k).eq(J-1);l.width(N+"px");G.width(N+"px");var H=a(w).parent();H.width((H.width()-O+N)+"px");var I=a(v).parent();I.width((I.width()-O+N)+"px");a(".resizeMarker,.resizeProxy",c).hide()}}))})}else{l.css("cursor",l.attr("orderField")?"pointer":"default");l.unbind("mousedown")}return false})})});function h(){a("div.j-resizeGrid").each(function(){var l=a(this).innerWidth();if(l){a("div.gridScroller",this).width(l+"px")}})}a(window).unbind(DWZ.eventType.resizeGrid).bind("resizeGrid",h)})};a.jTableTool={getLeft:function(b){var c=0;a(b).prevAll().each(function(){c+=a(this).outerWidth()});return c-1},getRight:function(b){var c=0;a(b).prevAll().andSelf().each(function(){c+=a(this).outerWidth()});return c-1},getTop:function(c){var b=0;a(c).parent().prevAll().each(function(){b+=a(this).outerHeight()});return b},getHeight:function(d,e){var c=0;var b=a(d).parent();b.nextAll().andSelf().each(function(){c+=a(this).outerHeight()});a(".gridTbody",e).children().each(function(){c+=a(this).outerHeight()});return c},getCellNum:function(b){return a(b).prevAll().andSelf().size()},getColspan:function(b){return a(b).attr("colspan")||1},getStart:function(b){var c=1;a(b).prevAll().each(function(){c+=parseInt(a(this).attr("colspan")||1)});return c},getPageCoord:function(c){var b={x:0,y:0};while(c){b.x+=c.offsetLeft;b.y+=c.offsetTop;c=c.offsetParent}return b},getOffset:function(e,c){if(a.browser.msie){var f=a(e).offset();var d={offsetX:c.pageX||c.screenX,offsetY:c.pageY||c.screenY};var g={offsetX:d.offsetX-f.left,offsetY:d.offsetY-f.top};return g}var j=c.target;if(j.offsetLeft==undefined){j=j.parentNode}var h=a.jTableTool.getPageCoord(j);var b={x:window.pageXOffset+c.clientX,y:window.pageYOffset+c.clientY};var g={offsetX:b.x-h.x,offsetY:b.y-h.y};return g}}})(jQuery);(function(a){a.fn.extend({jTask:function(b){return this.each(function(){var c=a(this);var d=c.attr("id");c.click(function(g){var f=a("body").data(d);if(c.hasClass("selected")){a("a.minimize",f).trigger("click")}else{if(f.is(":hidden")){a.taskBar.restoreDialog(f)}else{a(f).trigger("click")}}a.taskBar.scrollCurrent(a(this));return false});a("div.close",c).click(function(f){a.pdialog.close(d);return false}).hoverClass("closeHover");c.hoverClass("hover")})}});a.taskBar={_taskBar:null,_taskBox:null,_prevBut:null,_nextBut:null,_op:{id:"taskbar",taskBox:"div.taskbarContent",prevBut:".taskbarLeft",prevDis:"taskbarLeftDisabled",nextBut:".taskbarRight",nextDis:"taskbarRightDisabled",selected:"selected",boxMargin:"taskbarMargin"},init:function(c){var b=this;a.extend(this._op,c);this._taskBar=a("#"+this._op.id);if(this._taskBar.size()==0){this._taskBar=a(DWZ.frag.taskbar).appendTo(a("#layout"));this._taskBar.find(".taskbarLeft").hoverClass("taskbarLeftHover");this._taskBar.find(".taskbarRight").hoverClass("taskbarRightHover")}this._taskBox=this._taskBar.find(this._op.taskBox);this._taskList=this._taskBox.find(">ul");this._prevBut=this._taskBar.find(this._op.prevBut);this._nextBut=this._taskBar.find(this._op.nextBut);this._prevBut.click(function(d){b.scrollLeft()});this._nextBut.click(function(d){b.scrollRight()});this._contextmenu(this._taskBox)},_contextmenu:function(b){a(b).contextMenu("dialogCM",{bindings:{closeCurrent:function(e,c){var d=e.isTag("li")?e:a.taskBar._getCurrent();a("div.close",d).trigger("click")},closeOther:function(e,c){var d=e.isTag("li")?("#"+e.attr("id")):".selected";var f=a.taskBar._taskList.find(">li:not(:"+d+")");f.each(function(g){a("div.close",f[g]).trigger("click")})},closeAll:function(d,c){var e=a.taskBar._getTasks();e.each(function(f){a("div.close",e[f]).trigger("click")})}},ctrSub:function(f,c){var d=c.find("[rel='closeCurrent']");var e=c.find("[rel='closeOther']");if(!a.taskBar._getCurrent()[0]){d.addClass("disabled");e.addClass("disabled")}else{if(a.taskBar._getTasks().size()==1){e.addClass("disabled")}}}})},_scrollCurrent:function(){var c=this._tasksW(this._getTasks());if(c>this._getTaskBarW()){var b=this;var e=a(">li:last-child",this._taskList);var d=this._getTaskBarW()-e.position().left-e.outerWidth(true);this._taskList.animate({left:d+"px"},200,function(){b._ctrlScrollBut()})}else{this._ctrlScrollBut()}},_getTaskBarW:function(){return this._taskBox.width()-(this._prevBut.is(":hidden")?this._prevBut.width()+2:0)-(this._nextBut.is(":hidden")?this._nextBut.width()+2:0)},_scrollTask:function(d){var b=this;if(d.position().left+this._getLeft()+d.outerWidth()>this._getBarWidth()){var c=this._getTaskBarW()-d.position().left-d.outerWidth(true)-2;this._taskList.animate({left:c+"px"},200,function(){b._ctrlScrollBut()})}else{if(d.position().left+this._getLeft()<0){var c=this._getLeft()-(d.position().left+this._getLeft());this._taskList.animate({left:c+"px"},200,function(){b._ctrlScrollBut()})}}},_ctrlScrollBut:function(){var b=this._tasksW(this._getTasks());if(this._getTaskBarW()>b){this._taskBox.removeClass(this._op.boxMargin);this._nextBut.hide();this._prevBut.hide();if(this._getTasks().eq(0)[0]){this._scrollTask(this._getTasks().eq(0))}}else{this._taskBox.addClass(this._op.boxMargin);this._nextBut.show().removeClass(this._op.nextDis);this._prevBut.show().removeClass(this._op.prevDis);if(this._getLeft()>=0){this._prevBut.addClass(this._op.prevDis)}if(this._getLeft()<=this._getTaskBarW()-b){this._nextBut.addClass(this._op.nextDis)}}},_getLeft:function(){return this._taskList.position().left},_visibleStart:function(){var c=this._getLeft();var d=this._getTasks();for(var b=0;b<d.size();b++){if(d.eq(b).position().left+d.eq(b).outerWidth(true)+c>=0){return d.eq(b)}}return d.eq(0)},_visibleEnd:function(){var c=this._getLeft();var d=this._getTasks();for(var b=0;b<d.size();b++){if(d.eq(b).position().left+d.eq(b).outerWidth(true)+c>this._getBarWidth()){return d.eq(b)}}return d.eq(d.size()-1)},_getTasks:function(){return this._taskList.find(">li")},_tasksW:function(c){var b=0;c.each(function(){b+=a(this).outerWidth(true)});return b},_getBarWidth:function(){return this._taskBar.innerWidth()},addDialog:function(b,e){this.show();var c=a("#"+b,this._taskList);if(!c[0]){var d='<li id="#taskid#"><div class="taskbutton"><span>#title#</span></div><div class="close">Close</div></li>';this._taskList.append(d.replace("#taskid#",b).replace("#title#",e));c=a("#"+b,this._taskList);c.jTask()}else{a(">div>span",c).text(e)}this._contextmenu(c);this.switchTask(b);this._scrollTask(c)},closeDialog:function(b){var c=(typeof b=="string")?a("#"+b,this._taskList):b;c.remove();if(this._getTasks().size()==0){this.hide()}this._scrollCurrent()},restoreDialog:function(d){var b=(typeof d=="string")?a("body").data(d):d;var c=(typeof d=="string")?d:b.data("id");var e=a.taskBar.getTask(c);a(".resizable").css({top:a(window).height()-60,left:a(e).position().left,height:a(e).outerHeight(),width:a(e).outerWidth()}).show().animate({top:a(b).css("top"),left:a(b).css("left"),width:a(b).css("width"),height:a(b).css("height")},250,function(){a(this).hide();a(b).show();a.pdialog.attachShadow(b)});a.taskBar.switchTask(c)},inactive:function(b){a("#"+b,this._taskList).removeClass("selected")},scrollLeft:function(){var b=this._visibleStart();this._scrollTask(b)},scrollRight:function(){var b=this._visibleEnd();this._scrollTask(b)},scrollCurrent:function(b){this._scrollTask(b)},switchTask:function(b){this._getCurrent().removeClass("selected");this.getTask(b).addClass("selected")},_getCurrent:function(){return this._taskList.find(">.selected")},getTask:function(b){return a("#"+b,this._taskList)},show:function(){if(this._taskBar.is(":hidden")){this._taskBar.css("top",a(window).height()-34+this._taskBar.outerHeight()).show();this._taskBar.animate({top:a(window).height()-this._taskBar.outerHeight()},500)}},hide:function(){this._taskBar.animate({top:a(window).height()-29+this._taskBar.outerHeight(true)},500,function(){a.taskBar._taskBar.hide()})}}})(jQuery);function validateCallback(e,c,d){var a=$(e);if(!a.valid()){return false}var b=function(){$.ajax({type:e.method||"POST",url:a.attr("action"),data:a.serializeArray(),dataType:"json",cache:false,success:c||DWZ.ajaxDone,error:DWZ.ajaxError})};if(d){alertMsg.confirm(d,{okCall:b})}else{b()}return false}function iframeCallback(d,c){var a=$(d),b=$("#callbackframe");if(!a.valid()){return false}if(b.size()==0){b=$("<iframe id='callbackframe' name='callbackframe' src='about:blank' style='display:none'></iframe>").appendTo("body")}if(!d.ajax){a.append('<input type="hidden" name="ajax" value="1" />')}d.target="callbackframe";_iframeResponse(b[0],c||DWZ.ajaxDone)}function _iframeResponse(d,c){var b=$(d),a=$(document);a.trigger("ajaxStart");b.bind("load",function(h){b.unbind("load");a.trigger("ajaxStop");if(d.src=="javascript:'%3Chtml%3E%3C/html%3E';"||d.src=="javascript:'<html></html>';"){return}var f=d.contentDocument||d.document;if(f.readyState&&f.readyState!="complete"){return}if(f.body&&f.body.innerHTML=="false"){return}var j;if(f.XMLDocument){j=f.XMLDocument}else{if(f.body){try{j=b.contents().find("body").text();j=jQuery.parseJSON(j)}catch(g){j=f.body.innerHTML}}else{j=f}}c(j)})}function navTabAjaxDone(c){DWZ.ajaxDone(c);if(c[DWZ.keys.statusCode]==DWZ.statusCode.ok){if(c.navTabId){navTab.reloadFlag(c.navTabId)}else{var a=$("#pagerForm",navTab.getCurrentPanel());var b=a.size()>0?a.serializeArray():{};navTabPageBreak(b,c.rel)}if("closeCurrent"==c.callbackType){setTimeout(function(){navTab.closeCurrentTab(c.navTabId)},100)}else{if("forward"==c.callbackType){navTab.reload(c.forwardUrl)}else{if("forwardConfirm"==c.callbackType){alertMsg.confirm(c.confirmMsg||DWZ.msg("forwardConfirmMsg"),{okCall:function(){navTab.reload(c.forwardUrl)},cancelCall:function(){navTab.closeCurrentTab(c.navTabId)}})}else{navTab.getCurrentPanel().find(":input[initValue]").each(function(){var d=$(this).attr("initValue");$(this).val(d)})}}}}}function dialogAjaxDone(c){DWZ.ajaxDone(c);if(c[DWZ.keys.statusCode]==DWZ.statusCode.ok){if(c.navTabId){navTab.reload(c.forwardUrl,{navTabId:c.navTabId})}else{var a=$("#pagerForm",navTab.getCurrentPanel());var b=a.size()>0?a.serializeArray():{};navTabPageBreak(b,c.rel)}if("closeCurrent"==c.callbackType){$.pdialog.closeCurrent()}}}function navTabSearch(b,c){var a=$(b);if(b[DWZ.pageInfo.pageNum]){b[DWZ.pageInfo.pageNum].value=1}navTab.reload(a.attr("action"),{data:a.serializeArray(),navTabId:c});return false}function dialogSearch(b){var a=$(b);if(b[DWZ.pageInfo.pageNum]){b[DWZ.pageInfo.pageNum].value=1}$.pdialog.reload(a.attr("action"),{data:a.serializeArray()});return false}function dwzSearch(a,b){if(b=="dialog"){dialogSearch(a)}else{navTabSearch(a)}return false}function divSearch(c,d){var b=$(c);if(c[DWZ.pageInfo.pageNum]){c[DWZ.pageInfo.pageNum].value=1}if(d){var a=$("#"+d);a.ajaxUrl({type:"POST",url:b.attr("action"),data:b.serializeArray(),callback:function(){a.find("[layoutH]").layoutH()}})}return false}function _getPagerForm(a,b){var c=$("#pagerForm",a).get(0);if(c){if(b.pageNum){c[DWZ.pageInfo.pageNum].value=b.pageNum}if(b.numPerPage){c[DWZ.pageInfo.numPerPage].value=b.numPerPage}if(b.orderField){c[DWZ.pageInfo.orderField].value=b.orderField}if(b.orderDirection&&c[DWZ.pageInfo.orderDirection]){c[DWZ.pageInfo.orderDirection].value=b.orderDirection}}return c}function dwzPageBreak(e){var d=$.extend({targetType:"navTab",rel:"",data:{pageNum:"",numPerPage:"",orderField:"",orderDirection:""},callback:null},e);var b=d.targetType=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();if(d.rel){var a=b.find("#"+d.rel);var c=_getPagerForm(a,d.data);if(c){a.ajaxUrl({type:"POST",url:$(c).attr("action"),data:$(c).serializeArray(),callback:function(){a.find("[layoutH]").layoutH()}})}}else{var c=_getPagerForm(b,d.data);var f=$(c).serializeArray();if(d.targetType=="dialog"){if(c){$.pdialog.reload($(c).attr("action"),{data:f,callback:d.callback})}}else{if(c){navTab.reload($(c).attr("action"),{data:f,callback:d.callback})}}}}function navTabPageBreak(a,b){dwzPageBreak({targetType:"navTab",rel:b,data:a})}function dialogPageBreak(a,b){dwzPageBreak({targetType:"dialog",rel:b,data:a})}function ajaxTodo(url,callback){var $callback=callback||navTabAjaxDone;if(!$.isFunction($callback)){$callback=eval("("+callback+")")}$.ajax({type:"POST",url:url,dataType:"json",cache:false,success:$callback,error:DWZ.ajaxError})}function uploadifyQueueComplete(b){var a="The total number of files uploaded: "+b.uploadsSuccessful+"<br/>The total number of errors while uploading: "+b.uploadsErrored+"<br/>The total number of bytes uploaded: "+b.queueBytesUploaded+"<br/>The average speed of all uploaded files: "+b.averageSpeed;if(b.uploadsErrored){alertMsg.error(a)}else{alertMsg.correct(a)}}function uploadifySuccess(b,a,c){alert(a)}function uploadifyError(c,a,b){alertMsg.error(a+": "+b)}function uploadifyError(b,d,c,a){alert("event:"+b+"\nqueueId:"+d+"\nfileObj.name:"+c.name+"\nerrorObj.type:"+a.type+"\nerrorObj.info:"+a.info)}$.fn.extend({ajaxTodo:function(){return this.each(function(){var a=$(this);a.click(function(b){var d=unescape(a.attr("href")).replaceTmById($(b.target).parents(".unitBox:first"));DWZ.debug(d);if(!d.isFinishedTm()){alertMsg.error(a.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var c=a.attr("title");if(c){alertMsg.confirm(c,{okCall:function(){ajaxTodo(d,a.attr("callback"))}})}else{ajaxTodo(d,a.attr("callback"))}b.preventDefault()})})},dwzExport:function(){function a(d){var c=d.attr("targetType")=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();var b=$("#pagerForm",c);var e=d.attr("href");window.location=e+(e.indexOf("?")==-1?"?":"&")+b.serialize()}return this.each(function(){var b=$(this);b.click(function(c){var d=b.attr("title");if(d){alertMsg.confirm(d,{okCall:function(){a(b)}})}else{a(b)}c.preventDefault()})})}});(function(a){a.fn.extend({pagination:function(d){var e={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){var k=a(this);var o=new b(d);var m=o.getInterval();var n="";for(var l=m.start;l<m.end;l++){n+=e.pageNumFrag.replaceAll("#pageNum#",l).replaceAll("#liClass#",l==o.getCurrentPage()?"selected j-num":"j-num")}k.html(DWZ.frag.pagination.replaceAll("#pageNumFrag#",n).replaceAll("#currentPage#",o.getCurrentPage())).find("li").hoverClass();var f=k.find(e.first$);var j=k.find(e.prev$);var h=k.find(e.next$);var g=k.find(e.last$);if(o.hasPrev()){f.add(j).find(">span").hide();c(j,o.getCurrentPage()-1,o.targetType(),o.rel());c(f,1,o.targetType(),o.rel())}else{f.add(j).addClass("disabled").find(">a").hide()}if(o.hasNext()){h.add(g).find(">span").hide();c(h,o.getCurrentPage()+1,o.targetType(),o.rel());c(g,o.numPages(),o.targetType(),o.rel())}else{h.add(g).addClass("disabled").find(">a").hide()}k.find(e.nums$).each(function(p){c(a(this),p+m.start,o.targetType(),o.rel())});k.find(e.jumpto$).each(function(){var r=a(this);var q=r.find(":text");var p=r.find(":button");p.click(function(s){var t=q.val();if(t&&t.isPositiveInteger()){dwzPageBreak({targetType:o.targetType(),rel:o.rel(),data:{pageNum:t}})}});q.keyup(function(s){if(s.keyCode==DWZ.keyCode.ENTER){p.click()}})})});function c(f,g,j,h){f.bind("click",{pageNum:g},function(k){dwzPageBreak({targetType:j,rel:h,data:{pageNum:k.data.pageNum}});k.preventDefault()})}},orderBy:function(d){var c=a.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},d);return this.each(function(){var e=a(this).css({cursor:"pointer"}).click(function(){var g=e.attr("orderField");var f=e.hasClass(c.asc)?c.desc:c.asc;dwzPageBreak({targetType:c.targetType,rel:c.rel,data:{orderField:g,orderDirection:f}})})})},pagerForm:function(e){var d=a.extend({pagerForm$:"#pagerForm",parentBox:document},e);var c='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var g=a(this),f=a(d.pagerForm$,d.parentBox);var h=f.attr("action").replaceAll("#rel#",g.attr("action"));f.attr("action",h);g.find(":input").each(function(){var j=a(this),l=j.attr("name");if(l&&(!j.is(":checkbox,:radio")||j.is(":checked"))){if(f.find(":input[name='"+l+"']").length==0){var k=c.replaceAll("#name#",l).replaceAll("#value#",j.val());f.append(k)}}})})}});var b=function(c){this.opts=a.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return false}},c)};a.extend(b.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var d=Math.ceil(this.opts.pageNumShown/2);var e=this.numPages();var g=e-this.opts.pageNumShown;var f=this.getCurrentPage()>d?Math.max(Math.min(this.getCurrentPage()-d,g),0):0;var c=this.getCurrentPage()>d?Math.min(this.getCurrentPage()+d,e):Math.min(this.opts.pageNumShown,e);return{start:f+1,end:c+1}},getCurrentPage:function(){var c=parseInt(this.opts.currentPage);if(isNaN(c)){return 1}return c},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})})(jQuery);(function($){var _lookup={currentGroup:"",suffix:"",$target:null,pk:"id"};var _util={_lookupPrefix:function(key){var strDot=_lookup.currentGroup?".":"";return _lookup.currentGroup+strDot+key+_lookup.suffix},lookupPk:function(key){return this._lookupPrefix(key)},lookupField:function(key){return this.lookupPk(key)}};$.extend({bringBackSuggest:function(args){var $box=_lookup["$target"].parents(".unitBox:first");$box.find(":input").each(function(){var $input=$(this),inputName=$input.attr("name");for(var key in args){var name=(_lookup.pk==key)?_util.lookupPk(key):_util.lookupField(key);if(name==inputName){$input.val(args[key]);break}}})},bringBack:function(args){$.bringBackSuggest(args);$.pdialog.closeCurrent()}});$.fn.extend({lookup:function(){return this.each(function(){var $this=$(this),options={mask:true,width:$this.attr("width")||820,height:$this.attr("height")||400,maxable:eval($this.attr("maxable")||"true"),resizable:eval($this.attr("resizable")||"true")};$this.click(function(event){_lookup=$.extend(_lookup,{currentGroup:$this.attr("lookupGroup")||"",suffix:$this.attr("suffix")||"",$target:$this,pk:$this.attr("lookupPk")||"id"});var url=unescape($this.attr("href")).replaceTmById($(event.target).parents(".unitBox:first"));if(!url.isFinishedTm()){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.pdialog.open(url,"_blank",$this.attr("title")||$this.text(),options);return false})})},multLookup:function(){return this.each(function(){var $this=$(this),args={};$this.click(function(event){var $unitBox=$this.parents(".unitBox:first");$unitBox.find("[name='"+$this.attr("multLookup")+"']").filter(":checked").each(function(){var _args=DWZ.jsonEval($(this).val());for(var key in _args){var value=args[key]?args[key]+",":"";args[key]=value+_args[key]}});if($.isEmptyObject(args)){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}$.bringBack(args)})})},suggest:function(){var op={suggest$:"#suggest",suggestShadow$:"#suggestShadow"};var selectedIndex=-1;return this.each(function(){var $input=$(this).attr("autocomplete","off").keydown(function(event){if(event.keyCode==DWZ.keyCode.ENTER&&$(op.suggest$).is(":visible")){return false}});var suggestFields=$input.attr("suggestFields").split(",");function _show(event){var offset=$input.offset();var iTop=offset.top+this.offsetHeight;var $suggest=$(op.suggest$);if($suggest.size()==0){$suggest=$('<div id="suggest"></div>').appendTo($("body"))}$suggest.css({left:offset.left+"px",top:iTop+"px"}).show();_lookup=$.extend(_lookup,{currentGroup:$input.attr("lookupGroup")||"",suffix:$input.attr("suffix")||"",$target:$input,pk:$input.attr("lookupPk")||"id"});var url=unescape($input.attr("suggestUrl")).replaceTmById($(event.target).parents(".unitBox:first"));if(!url.isFinishedTm()){alertMsg.error($input.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var postData={};postData[$input.attr("postField")||"inputValue"]=$input.val();$.ajax({global:false,type:"POST",dataType:"json",url:url,cache:false,data:postData,success:function(response){if(!response){return}var html="";$.each(response,function(i){var liAttr="",liLabel="";for(var i=0;i<suggestFields.length;i++){var str=this[suggestFields[i]];if(str){if(liLabel){liLabel+="-"}liLabel+=str}}for(var key in this){if(liAttr){liAttr+=","}liAttr+=key+":'"+this[key]+"'"}html+='<li lookupAttrs="'+liAttr+'">'+liLabel+"</li>"});var $lis=$suggest.html("<ul>"+html+"</ul>").find("li");$lis.hoverClass("selected").click(function(){_select($(this))});if($lis.size()==1&&event.keyCode!=DWZ.keyCode.BACKSPACE){_select($lis.eq(0))}else{if($lis.size()==0){var jsonStr="";for(var i=0;i<suggestFields.length;i++){if(_util.lookupField(suggestFields[i])==event.target.name){break}if(jsonStr){jsonStr+=","}jsonStr+=suggestFields[i]+":''"}jsonStr="{"+_lookup.pk+":'',"+jsonStr+"}";$.bringBackSuggest(DWZ.jsonEval(jsonStr))}}},error:function(){$suggest.html("")}});$(document).bind("click",_close);return false}function _select($item){var jsonStr="{"+$item.attr("lookupAttrs")+"}";$.bringBackSuggest(DWZ.jsonEval(jsonStr))}function _close(){$(op.suggest$).html("").hide();selectedIndex=-1;$(document).unbind("click",_close)}$input.focus(_show).click(false).keyup(function(event){var $items=$(op.suggest$).find("li");switch(event.keyCode){case DWZ.keyCode.ESC:case DWZ.keyCode.TAB:case DWZ.keyCode.SHIFT:case DWZ.keyCode.HOME:case DWZ.keyCode.END:case DWZ.keyCode.LEFT:case DWZ.keyCode.RIGHT:break;case DWZ.keyCode.ENTER:_close();break;case DWZ.keyCode.DOWN:if(selectedIndex>=$items.size()-1){selectedIndex=-1}else{selectedIndex++}break;case DWZ.keyCode.UP:if(selectedIndex<0){selectedIndex=$items.size()-1}else{selectedIndex--}break;default:_show(event)}$items.removeClass("selected");if(selectedIndex>=0){var $item=$items.eq(selectedIndex).addClass("selected");_select($item)}})})},itemDetail:function(){return this.each(function(){var $table=$(this).css("clear","both"),$tbody=$table.find("tbody");var fields=[];$table.find("tr:first th[type]").each(function(i){var $th=$(this);var field={type:$th.attr("type")||"text",patternDate:$th.attr("dateFmt")||"yyyy-MM-dd",name:$th.attr("name")||"",defaultVal:$th.attr("defaultVal")||"",size:$th.attr("size")||"12",enumUrl:$th.attr("enumUrl")||"",lookupGroup:$th.attr("lookupGroup")||"",lookupUrl:$th.attr("lookupUrl")||"",lookupPk:$th.attr("lookupPk")||"id",suggestUrl:$th.attr("suggestUrl"),suggestFields:$th.attr("suggestFields"),postField:$th.attr("postField")||"",fieldClass:$th.attr("fieldClass")||"",fieldAttrs:$th.attr("fieldAttrs")||""};fields.push(field)});$tbody.find("a.btnDel").click(function(){var $btnDel=$(this);if($btnDel.is("[href^=javascript:]")){$btnDel.parents("tr:first").remove();initSuffix($tbody);return false}function delDbData(){$.ajax({type:"POST",dataType:"json",url:$btnDel.attr("href"),cache:false,success:function(){$btnDel.parents("tr:first").remove();initSuffix($tbody)},error:DWZ.ajaxError})}if($btnDel.attr("title")){alertMsg.confirm($btnDel.attr("title"),{okCall:delDbData})}else{delDbData()}return false});var addButTxt=$table.attr("addButton")||"Add New";if(addButTxt){var $addBut=$('<div class="button"><div class="buttonContent"><button type="button">'+addButTxt+"</button></div></div>").insertBefore($table).find("button");var $rowNum=$('<input type="text" name="dwz_rowNum" class="textInput" style="margin:2px;" value="1" size="2"/>').insertBefore($table);var trTm="";$addBut.click(function(){if(!trTm){trTm=trHtml(fields)}var rowNum=1;try{rowNum=parseInt($rowNum.val())}catch(e){}for(var i=0;i<rowNum;i++){var $tr=$(trTm);$tr.appendTo($tbody).initUI().find("a.btnDel").click(function(){$(this).parents("tr:first").remove();initSuffix($tbody);return false})}initSuffix($tbody)})}});function initSuffix($tbody){$tbody.find(">tr").each(function(i){$(":input, a.btnLook, a.btnAttach",this).each(function(){var $this=$(this),name=$this.attr("name"),val=$this.val();if(name){$this.attr("name",name.replaceSuffix(i))}var lookupGroup=$this.attr("lookupGroup");if(lookupGroup){$this.attr("lookupGroup",lookupGroup.replaceSuffix(i))}var suffix=$this.attr("suffix");if(suffix){$this.attr("suffix",suffix.replaceSuffix(i))}if(val&&val.indexOf("#index#")>=0){$this.val(val.replace("#index#",i+1))}})})}function tdHtml(field){var html="",suffix="";if(field.name.endsWith("[#index#]")){suffix="[#index#]"}else{if(field.name.endsWith("[]")){suffix="[]"}}var suffixFrag=suffix?' suffix="'+suffix+'" ':"";var attrFrag="";if(field.fieldAttrs){var attrs=DWZ.jsonEval(field.fieldAttrs);for(var key in attrs){attrFrag+=key+'="'+attrs[key]+'"'}}switch(field.type){case"del":html='<a href="javascript:void(0)" class="btnDel '+field.fieldClass+'">删除</a>';break;case"lookup":var suggestFrag="";if(field.suggestFields){suggestFrag='autocomplete="off" lookupGroup="'+field.lookupGroup+'"'+suffixFrag+' suggestUrl="'+field.suggestUrl+'" suggestFields="'+field.suggestFields+'" postField="'+field.postField+'"'}html='<input type="hidden" name="'+field.lookupGroup+"."+field.lookupPk+suffix+'"/><input type="text" name="'+field.name+'"'+suggestFrag+' lookupPk="'+field.lookupPk+'" size="'+field.size+'" class="'+field.fieldClass+'"/><a class="btnLook" href="'+field.lookupUrl+'" lookupGroup="'+field.lookupGroup+'" '+suggestFrag+' lookupPk="'+field.lookupPk+'" title="查找带回">查找带回</a>';break;case"attach":html='<input type="hidden" name="'+field.lookupGroup+"."+field.lookupPk+suffix+'"/><input type="text" name="'+field.name+'" size="'+field.size+'" readonly="readonly" class="'+field.fieldClass+'"/><a class="btnAttach" href="'+field.lookupUrl+'" lookupGroup="'+field.lookupGroup+'" '+suffixFrag+' lookupPk="'+field.lookupPk+'" width="560" height="300" title="查找带回">查找带回</a>';break;case"enum":$.ajax({type:"POST",dataType:"html",async:false,url:field.enumUrl,data:{inputName:field.name},success:function(response){html=response}});break;case"date":html='<input type="text" name="'+field.name+'" value="'+field.defaultVal+'" class="date '+field.fieldClass+'" dateFmt="'+field.patternDate+'" size="'+field.size+'"/><a class="inputDateButton" href="javascript:void(0)">选择</a>';break;default:html='<input type="'+field.type+'" name="'+field.name+'" value="'+field.defaultVal+'" size="'+field.size+'" class="'+field.fieldClass+'" '+attrFrag+"/>";break}return"<td>"+html+"</td>"}function trHtml(fields){var html="";$(fields).each(function(){html+=tdHtml(this)});return'<tr class="unitBox">'+html+"</tr>"}},selectedTodo:function(){function _getIds(selectedIds,targetType){var ids="";var $box=targetType=="dialog"?$.pdialog.getCurrent():navTab.getCurrentPanel();$box.find("input:checked").filter("[name='"+selectedIds+"']").each(function(i){var val=$(this).val();ids+=i==0?val:","+val});return ids}return this.each(function(){var $this=$(this);var selectedIds=$this.attr("rel")||"ids";var postType=$this.attr("postType")||"map";$this.click(function(){var targetType=$this.attr("targetType");var ids=_getIds(selectedIds,targetType);if(!ids){alertMsg.error($this.attr("warn")||DWZ.msg("alertSelectMsg"));return false}var _callback=$this.attr("callback")||(targetType=="dialog"?dialogAjaxDone:navTabAjaxDone);if(!$.isFunction(_callback)){_callback=eval("("+_callback+")")}function _doPost(){$.ajax({type:"POST",url:$this.attr("href"),dataType:"json",cache:false,data:function(){if(postType=="map"){return $.map(ids.split(","),function(val,i){return{name:selectedIds,value:val}})}else{var _data={};_data[selectedIds]=ids;return _data}}(),success:_callback,error:DWZ.ajaxError})}var title=$this.attr("title");if(title){alertMsg.confirm(title,{okCall:_doPost})}else{_doPost()}return false})})}})})(jQuery);(function(a){a.setRegional("datepicker",{dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});a.fn.datepicker=function(g){var h={box$:"#calendar",year$:"#calendar [name=year]",month$:"#calendar [name=month]",tmInputs$:"#calendar .time :text",hour$:"#calendar .time .hh",minute$:"#calendar .time .mm",second$:"#calendar .time .ss",tmBox$:"#calendar .tm",tmUp$:"#calendar .time .up",tmDown$:"#calendar .time .down",close$:"#calendar .close",calIcon$:"a.inputDateButton",main$:"#calendar .main",days$:"#calendar .days",dayNames$:"#calendar .dayNames",clearBut$:"#calendar .clearBut",okBut$:"#calendar .okBut"};function d(k){var j=a(h.tmBox$);j.removeClass("hh").removeClass("mm").removeClass("ss");if(k){j.addClass(k);a(h.tmInputs$).removeClass("slt").filter("."+k).addClass("slt")}}function e(j,k){a(h.tmBox$).find("."+k+" li").each(function(){var l=a(this);l.click(function(){j.val(l.text())})})}function f(j){if(!((j.keyCode>=48&&j.keyCode<=57)||(j.keyCode==DWZ.keyCode.DELETE||j.keyCode==DWZ.keyCode.BACKSPACE))){return false}}function c(j,o){var n=parseInt(j.val()),l=parseInt(j.attr("start"))||0,k=parseInt(j.attr("end"));var m=parseInt(j.attr("step")||1);if(o==1){if(n<=k-m){j.val(n+m)}}else{if(o==-1){if(n>=l+m){j.val(n-m)}}else{if(n>k){j.val(k)}else{if(n<l){j.val(l)}}}}}return this.each(function(){var j=a(this);var l=new b(j.val(),g);function m(w){var x=w.getDateWrap();var B=w.getMinDate();var A=w.getMaxDate();var C=new Date(x.year,x.month-1,1);var E=C.getDay();var v="";if(E>0){C.setMonth(C.getMonth()-1);var D=w.getDateWrap(C);for(var F=D.days-E+1;F<=D.days;F++){var u=new Date(x.year,x.month-2,F);var s=(u>=B&&u<=A)?"":"disabled";v+='<dd class="other '+s+'" chMonth="-1" day="'+F+'">'+F+"</dd>"}}for(var F=1;F<=x.days;F++){var u=new Date(x.year,x.month-1,F);var s=(u>=B&&u<=A)?"":"disabled";if(F==x.day){v+='<dd class="slt '+s+'" day="'+F+'">'+F+"</dd>"}else{v+='<dd class="'+s+'" day="'+F+'">'+F+"</dd>"}}for(var F=1;F<=42-E-x.days;F++){var u=new Date(x.year,x.month,F);var s=(u>=B&&u<=A)?"":"disabled";v+='<dd class="other '+s+'" chMonth="1" day="'+F+'">'+F+"</dd>"}var n=a(h.days$).html(v).find("dd");n.not(".disabled").click(function(){var t=a(this);if(!w.hasTime()){j.val(w.formatDate(w.changeDay(t.attr("day"),t.attr("chMonth"))));k()}else{n.removeClass("slt");t.addClass("slt")}});if(!w.hasDate()){a(h.main$).addClass("nodate")}if(w.hasTime()){a("#calendar .time").show();var o=a(h.hour$).val(x.hour).focus(function(){d("hh")});var z=parseInt(x.minute/w.opts.mmStep)*w.opts.mmStep;var q=a(h.minute$).val(z).attr("step",w.opts.mmStep).focus(function(){d("mm")});var r=a(h.second$).val(w.hasSecond()?x.second:0).attr("step",w.opts.ssStep).focus(function(){d("ss")});o.add(q).add(r).click(function(){return false});e(o,"hh");e(q,"mm");e(r,"ss");a(h.box$).click(function(){d()});var p=a(h.tmInputs$);p.keydown(f).each(function(){var t=a(this);t.keyup(function(){c(t,0)})});a(h.tmUp$).click(function(){p.filter(".slt").each(function(){c(a(this),1)})});a(h.tmDown$).click(function(){p.filter(".slt").each(function(){c(a(this),-1)})});if(!w.hasHour()){o.attr("disabled",true)}if(!w.hasMinute()){q.attr("disabled",true)}if(!w.hasSecond()){r.attr("disabled",true)}}}function k(){a(h.box$).remove();a(document).unbind("click",k)}j.click(function(s){k();var q=new b(j.val(),g);var v=j.offset();var u=v.top+this.offsetHeight;a(DWZ.frag.calendarFrag).appendTo("body").css({left:v.left+"px",top:u+"px"}).show().click(function(z){z.stopPropagation()});(a.fn.bgiframe&&a(h.box$).bgiframe());var p="";a.each(a.regional.datepicker.dayNames,function(z,A){p+="<dt>"+A+"</dt>"});a(h.dayNames$).html(p);var r=q.getDateWrap();var o=a(h.year$);var x=q.getMinDate().getFullYear();var w=q.getMaxDate().getFullYear();for(y=x;y<=w;y++){o.append('<option value="'+y+'"'+(r.year==y?'selected="selected"':"")+">"+y+"</option>")}var n=a(h.month$);a.each(a.regional.datepicker.monthNames,function(z,B){var A=z+1;n.append('<option value="'+A+'"'+(r.month==A?'selected="selected"':"")+">"+B+"</option>")});m(q);o.add(n).change(function(){q.changeDate(o.val(),n.val());m(q)});var t=a(h.box$).outerHeight(true);if(u>t&&u>a(window).height()-t){a(h.box$).css("top",v.top-t)}a(h.close$).click(function(){k()});a(h.clearBut$).click(function(){j.val("");k()});a(h.okBut$).click(function(){var z=a(h.days$).find("dd.slt");if(z.hasClass("disabled")){return false}var A=q.changeDay(z.attr("day"),z.attr("chMonth"));if(q.hasTime()){A.setHours(parseInt(a(h.hour$).val()));A.setMinutes(parseInt(a(h.minute$).val()));A.setSeconds(parseInt(a(h.second$).val()))}j.val(q.formatDate(A));k()});a(document).bind("click",k);return false});j.parent().find(h.calIcon$).click(function(){j.trigger("click");return false})})};var b=function(e,d){this.opts=a.extend({pattern:"yyyy-MM-dd",minDate:"1900-01-01",maxDate:"2099-12-31",mmStep:1,ssStep:1},d);var c=new Date();this.opts.minDate=c.formatDateTm(this.opts.minDate);this.opts.maxDate=c.formatDateTm(this.opts.maxDate);this.sDate=e.trim()};a.extend(b.prototype,{get:function(c){return this.opts[c]},_getDays:function(d,c){return c==2?(d%4||!(d%100)&&d%400?28:29):(/4|6|9|11/.test(c)?30:31)},_minMaxDate:function(e){var c=e.split("-").length-1;var d="y-M-d";if(c==1){d="y-M"}else{if(c==0){d="y"}}return e.parseDate(d)},getMinDate:function(){return this._minMaxDate(this.opts.minDate)},getMaxDate:function(){var f=this.opts.maxDate;var c=f.split("-").length-1;var d=this._minMaxDate(f);if(c<2){var e=this._getDays(d.getFullYear(),d.getMonth()+1);d.setDate(e);if(c==0){d.setMonth(11)}}return d},getDateWrap:function(c){if(!c){c=this.parseDate(this.sDate)||new Date()}var f=c.getFullYear();var e=c.getMonth()+1;var d=this._getDays(f,e);return{year:f,month:e,day:c.getDate(),hour:c.getHours(),minute:c.getMinutes(),second:c.getSeconds(),days:d,date:c}},changeDate:function(g,f,c){var e=new Date(g,f-1,c||1);this.sDate=this.formatDate(e);return e},changeDay:function(d,c){if(!c){c=0}var e=this.getDateWrap();return this.changeDate(e.year,e.month+parseInt(c),d)},parseDate:function(c){if(!c){return null}return c.parseDate(this.opts.pattern)},formatDate:function(c){return c.formatDate(this.opts.pattern)},hasHour:function(){return this.opts.pattern.indexOf("H")!=-1},hasMinute:function(){return this.opts.pattern.indexOf("m")!=-1},hasSecond:function(){return this.opts.pattern.indexOf("s")!=-1},hasTime:function(){return this.hasHour()||this.hasMinute()||this.hasSecond()},hasDate:function(){var c=["y","M","d","E"];for(var d=0;d<c.length;d++){if(this.opts.pattern.indexOf(c[d])!=-1){return true}}return false}})})(jQuery);(function(a){a.extend(a.fn,{jBlindUp:function(c){var b=a.extend({duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var d=a(this);a(this).animate({height:0},{step:function(){},duration:b.duration,easing:b.easing,complete:function(){d.css({display:"none"});b.call()}})})},jBlindDown:function(c){var b=a.extend({to:0,duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var d=a(this);var e=(b.to>0)?b.to:a.effect.getDimensions(d[0]).height;d.animate({height:e},{step:function(){},duration:b.duration,easing:b.easing,complete:function(){d.css({display:""});b.call()}})})},jSlideUp:function(c){var b=a.extend({to:0,duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var d=a(this);d.wrapInner("<div></div>");var e=(b.to>0)?b.to:a.effect.getDimensions(a(">div",d)[0]).height;d.css({overflow:"visible",position:"relative"});a(">div",d).css({position:"relative"}).animate({top:-e},{easing:b.easing,duration:b.duration,complete:function(){d.html(a(this).html())}})})},jSlideDown:function(c){var b=a.extend({to:0,duration:500,easing:"swing",call:function(){}},c);return this.each(function(){var d=a(this);var e=(b.to>0)?b.to:a.effect.getDimensions(d[0]).height;d.wrapInner('<div style="top:-'+e+'px;"></div>');d.css({overflow:"visible",position:"relative",height:"0px"}).animate({height:e},{duration:b.duration,easing:b.easing,complete:function(){d.css({display:"",overflow:""});b.call()}});a(">div",d).css({position:"relative"}).animate({top:0},{easing:b.easing,duration:b.duration,complete:function(){d.html(a(this).html())}})})}});a.effect={getDimensions:function(e,c){var b=new a.effect.Rectangle;var d=a(e).css("display");var g=a(e).css("visibility");var f=a(e).height()==0?true:false;if(a(e).is(":hidden")){a(e).css({visibility:"hidden",display:"block"});if(f){a(e).css("height","")}if(a.browser.opera){refElement.focus()}}b.height=a(e).outerHeight();b.width=a(e).outerWidth();if(d=="none"){a(e).css({visibility:g,display:"none"});if(f){if(f){a(e).css("height","0px")}}}return b}};a.effect.Rectangle=function(){this.width=0;this.height=0;this.unit="px"}})(jQuery);(function(a){a.extend(a.fn,{jPanel:function(c){var b=a.extend({header:"panelHeader",headerC:"panelHeaderContent",content:"panelContent",coll:"collapsable",exp:"expandable",footer:"panelFooter",footerC:"panelFooterContent"},c);return this.each(function(){var e=a(this);var g=e.hasClass("close");var h=e.hasClass("collapse");var d=a(">div",e).addClass(b.content);var o=a(">h1",e).wrap('<div class="'+b.header+'"><div class="'+b.headerC+'"></div></div>');if(h){a('<a href=""></a>').addClass(g?b.exp:b.coll).insertAfter(o)}var l=a(">div:first",e);var k=a('<div class="'+b.footer+'"><div class="'+b.footerC+'"></div></div>').appendTo(e);var j=e.attr("defH")?e.attr("defH"):0;var n=e.attr("minH")?e.attr("minH"):0;if(g){d.css({height:"0px",display:"none"})}else{if(j>0){d.height(j+"px")}else{if(n>0){d.css("minHeight",n+"px")}}}if(!h){return}var f=a("a",l);var m=d.innerHeight()-6;if(n>0&&n>=m){j=n}else{j=m}f.click(function(){if(f.hasClass(b.exp)){d.jBlindDown({to:j,call:function(){f.removeClass(b.exp).addClass(b.coll);if(n>0){d.css("minHeight",n+"px")}}})}else{if(n>0){d.css("minHeight","")}if(n>=m){d.css("height",n+"px")}d.jBlindUp({call:function(){f.removeClass(b.coll).addClass(b.exp)}})}return false})})}})})(jQuery);(function(a){a.fn.extend({checkboxCtrl:function(b){return this.each(function(){var c=a(this);c.click(function(){var d=c.attr("group");if(c.is(":checkbox")){var e=c.is(":checked")?"all":"none";if(d){a.checkbox.select(d,e,b)}}else{if(d){a.checkbox.select(d,c.attr("selectType")||"all",b)}}})})}});a.checkbox={selectAll:function(b,c){this.select(b,"all",c)},unSelectAll:function(b,c){this.select(b,"none",c)},selectInvert:function(b,c){this.select(b,"invert",c)},select:function(b,d,c){$parent=a(c||document);$checkboxLi=$parent.find(":checkbox[name='"+b+"']");switch(d){case"invert":$checkboxLi.each(function(){$checkbox=a(this);$checkbox.attr("checked",!$checkbox.is(":checked"))});break;case"none":$checkboxLi.attr("checked",false);break;default:$checkboxLi.attr("checked",true);break}}}})(jQuery);(function(a){var c=[];var d=function(e){a.each(c,function(f){if(c[f]!=e){if(!a("#"+c[f])[0]){a("#op_"+c[f]).remove()}else{a("#op_"+c[f]).css({height:"",width:""}).hide()}a(document).unbind("click",d)}})};var b=function(f){var e=a("#"+f.data.ref);if(e.size()==0){return false}a.ajax({type:"POST",dataType:"json",url:f.data.refUrl.replace("{value}",encodeURIComponent(f.data.$this.attr("value"))),cache:false,data:{},success:function(j){if(!j){return}var h="";a.each(j,function(k){if(j[k]&&j[k].length>1){h+='<option value="'+j[k][0]+'">'+j[k][1]+"</option>"}});var g=e.parents("div.combox:first");e.html(h).insertAfter(g);g.remove();e.trigger("change").combox()},error:DWZ.ajaxError})};a.extend(a.fn,{comboxSelect:function(f){var e=a.extend({selector:">a"},f);return this.each(function(){var g=a(this);var h=a(e.selector,g);c.push(g.attr("id"));a(e.selector,g).click(function(){var j=a("#op_"+g.attr("id"));if(j.is(":hidden")){if(j.height()>300){j.css({height:"300px",overflow:"scroll"})}var k=g.offset().top+g[0].offsetHeight-50;if(k+j.height()>a(window).height()-20){k=a(window).height()-20-j.height()}j.css({top:k,left:g.offset().left}).show();d(g.attr("id"));a(document).click(d)}else{a(document).unbind("click",d);d()}return false});a("#op_"+g.attr("id")).find(">li").comboxOption(h,g)})},comboxOption:function(f,e){return this.each(function(){a(">a",this).click(function(){var h=a(this);h.parent().parent().find(".selected").removeClass("selected");h.addClass("selected");f.text(h.text());var g=a("select",e);if(g.val()!=h.attr("value")){a("select",e).val(h.attr("value")).trigger("change")}})})},combox:function(){var e=[];a.each(c,function(f){if(a("#"+c[f])[0]){e.push(c[f])}else{a("#op_"+c[f]).remove()}});c=e;return this.each(function(h){var f=a(this).removeClass("combox");var k=f.attr("name");var p=f.val();var j=a("option[value="+p+"]",f).text();var m=f.attr("ref");var n=f.attr("refUrl")||"";var g=f.attr("id")||Math.round(Math.random()*10000000);var o='<div class="combox"><div id="combox_'+g+'" class="select"'+(m?' ref="'+m+'"':"")+">";o+='<a href="javascript:" class="'+f.attr("class")+'" name="'+k+'" value="'+p+'">'+j+"</a></div></div>";var l='<ul class="comboxop" id="op_combox_'+g+'">';a("option",f).each(function(){var q=a(this);l+='<li><a class="'+(p==q[0].value?"selected":"")+'" href="#" value="'+q[0].value+'">'+q[0].text+"</a></li>"});l+="</ul>";a("body").append(l);f.after(o);a("div.select",f.next()).comboxSelect().append(f);if(m&&n){f.unbind("change",b).bind("change",{ref:m,refUrl:n,$this:f},b)}})}})})(jQuery);(function(a){a.extend({History:{_hash:new Array(),_cont:undefined,_currentHash:"",_callback:undefined,init:function(c,b){a.History._cont=c;a.History._callback=b;var d=location.hash.replace(/\?.*$/,"");a.History._currentHash=d;if(a.browser.msie){if(a.History._currentHash==""){a.History._currentHash="#"}a("body").append('<iframe id="jQuery_history" style="display: none;" src="about:blank"></iframe>');var f=a("#jQuery_history")[0];var e=f.contentDocument||f.contentWindow.document;e.open();e.close();e.location.hash=d}if(a.isFunction(this._callback)){a.History._callback(d.skipChar("#"))}setInterval(a.History._historyCheck,100)},_historyCheck:function(){var b="";if(a.browser.msie){var d=a("#jQuery_history")[0];var c=d.contentWindow;b=c.location.hash.skipChar("#").replace(/\?.*$/,"")}else{b=location.hash.skipChar("#").replace(/\?.*$/,"")}if(b!=a.History._currentHash){a.History._currentHash=b;a.History.loadHistory(b)}},addHistory:function(d,c,b){a.History._currentHash=d;var e=[d,c,b];a.History._hash.push(e);if(a.browser.msie){var g=a("#jQuery_history")[0];var f=g.contentDocument||g.contentWindow.document;f.open();f.close();f.location.hash=d.replace(/\?.*$/,"");location.hash=d.replace(/\?.*$/,"")}else{location.hash=d.replace(/\?.*$/,"")}},loadHistory:function(b){if(a.browser.msie){location.hash=b}for(var c=0;c<a.History._hash.length;c+=1){if(a.History._hash[c][0]==b){a.History._hash[c][1](a.History._hash[c][2]);return}}}}})})(jQuery);(function(a){a.printBox=function(e){var d="printBox";var b=e?a("#"+e):a("body"),c=a("#"+d);if(c.size()==0){c=a('<div id="'+d+'"></div>').appendTo("body")}c.html(b.html()).find("[layoutH]").height("auto");window.print()}})(jQuery);